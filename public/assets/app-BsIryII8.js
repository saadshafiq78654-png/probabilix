import{m as v}from"./module.esm-uXcmRlT3.js";import{C as jt,m as Nt}from"./formdata-CMBmz5Zs.js";import{A as Ht,I as zt}from"./ip-K9DB_9g-.js";import{g as Me,t as w,_ as x}from"./toast-C5YoKCAA.js";import{p as P,g as Ot,m as Mt}from"./pin-BBFOlic1.js";import{h as Le}from"./redirect-CPFN15vL.js";import{s as Wt}from"./module.esm-D2wLF7YV.js";function Kt(){v.store("user",window.state.user),v.store("workspace",window.state.workspace)}let f=new Ht;f.base="/api";function Yt(){let l=[],n=!1;async function r(s=null){let i={};s&&(i.starting_after=s);let t=await(await f.get("/categories",i)).json();if(t.data.length==0){n=!0;return}return l.push(...t.data),n||r(l[l.length-1].id),l}return r()}function re(){let l=[],n=!1;async function r(s=null){let i={sort:"price:asc"};s&&(i.starting_after=s);let t=await(await f.get("/billing/plans",i)).json();if(t.data.length==0){n=!0;return}return l.push(...t.data),n||r(l[l.length-1].id),l}return r()}function Gt(){v.data("lc",(l=[],n=[])=>({filters:l,sort:n,orderby:null,dir:null,params:{query:null,sort:null},init(){this.filters.forEach(s=>this.params[s.model]=null),this.getCategories(),this.getPlans(),["orderby","dir"].forEach(s=>{this.$watch(s,()=>{this.params.sort=null,this.orderby&&(this.params.sort=this.orderby,this.dir&&(this.params.sort+=`:${this.dir}`))})}),this.$watch("params",s=>{this.$dispatch("lc.filtered",s),this.updateUrl()}),this.parseUrl(),window.addEventListener("lc.reset",()=>this.resetFilters())},resetFilters(){for(const r in this.params)r!="sort"&&(this.params[r]=null)},getCategories(){let r=this.filters.find(s=>s.model=="category");r&&Yt().then(s=>{s.forEach(i=>{r.options.push({value:i.id,label:i.title}),this.parseUrl()})})},getPlans(){let r=this.filters.find(i=>i.model=="plan");if(!r)return;let s=r.billing_cycle||[];re().then(i=>{i.forEach(e=>{(s.length==0||s.includes(e.billing_cycle))&&r.options.push({value:e.id,label:e.title+" / "+Me(e.billing_cycle)})}),this.parseUrl()})},parseUrl(){var i;let r=new URL(window.location.href),s=new URLSearchParams(r.search.slice(1));for(const e in this.params){if(!s.has(e))continue;if(e=="query"){this.params.query=s.get(e);continue}let t=this.filters.find(o=>o.model==e);!t||!((i=t.options)!=null&&i.find(o=>o.value==s.get(e)))&&!t.hidden||(this.params[e]=s.get(e))}if(this.params.sort){let e=this.params.sort.split(":");this.orderby=e[0],this.dir=e[1]||"asc"}},updateUrl(){let r=new URL(window.location.href),s=new URLSearchParams(r.search.slice(1));for(const i in this.params)this.params[i]?s.set(i,this.params[i]):s.delete(i);window.history.pushState({},"",`${r.origin}${r.pathname}?${s}`)}})),v.data("list",(l,n=[],r=25,s=!0,i=null)=>({state:"initial",params:{},total:null,all:null,cursor:null,resources:[],isLoading:!1,hasMore:!0,isFiltered:!1,currentResource:null,isDeleting:!1,init(){this.loadMore(),s&&this.getTotalCount();let e=null;e=setTimeout(()=>this.retrieveResources(),200),window.addEventListener("lc.filtered",t=>{clearTimeout(e),e=setTimeout(()=>{this.params=t.detail,this.retrieveResources(!0)},200)})},applyQueryParams(e){let t=new URL(window.location.href);new URLSearchParams(t.search.slice(1)).forEach((o,h)=>{e[h]=o})},getTotalCount(){let e={};this.applyQueryParams(e),f.get(`${l}/count`,e).then(t=>t.json()).then(t=>this.total=t.count),e.hasOwnProperty("all")||(e.all=!0,f.get(`${l}/count`,e).then(t=>t.json()).then(t=>this.all=t.count))},retrieveResources(e=!1){this.isLoading=!0;let t={limit:r},a=!1;e||this.applyQueryParams(t);for(const o in this.params)this.params[o]&&(o!="sort"&&(a=!0),t[o]=this.params[o]);this.isFiltered=a,!e&&this.cursor&&(t.starting_after=this.cursor),f.get(l,t).then(o=>o.json()).then(o=>{this.state="loaded";let h=o.data;h.forEach(u=>{u.pinned=P.isPinned(u.id,i)}),this.resources=e?h:this.resources.concat(h),this.sortResources(),this.resources.length>0?this.cursor=this.resources[this.resources.length-1].id:this.state="empty",this.isLoading=!1,this.hasMore=h.length>=r})},loadMore(){const e=document.getElementById("content");e.addEventListener("scroll",()=>{this.hasMore&&!this.isLoading&&e.clientHeight+e.scrollTop+500>=e.scrollHeight&&this.retrieveResources()})},toggleStatus(e){e.status=e.status==1?0:1,f.post(`${l}/${e.id}`,{status:e.status})},deleteResource(e){this.isDeleting=!0,f.delete(`${l}/${e.id}`).then(()=>{this.resources.splice(this.resources.indexOf(e),1),window.modal.close(),this.currentResource=null,w.show(n.delete_success,"ti ti-trash"),this.isDeleting=!1}).catch(t=>{this.isDeleting=!1})},getBillingCycleLabel(e){return Me(e)},sortResources(){this.resources.sort((e,t)=>{const a=e.granted||!1,o=t.granted||!1;if(a!==o)return o-a;const h=e.pinned||!1,u=t.pinned||!1;if(h!==u)return u-h;if(h&&u){const d=P.getPinOrder(e.id,i),c=P.getPinOrder(t.id,i);return d-c}return 0})},togglePin(e){P.toggle(e.id,i),e.pinned=!e.pinned,this.sortResources()}})),v.data("masonry",()=>({set:[],columnCount:2,init(){this.updateColumnCount(),this.distributeItems(),new ResizeObserver(n=>{this.updateColumnCount()}).observe(this.$el),this.$watch("resources",()=>{this.distributeItems()})},updateColumnCount(){const l=this.$el,n=window.getComputedStyle(l);let r;n.display==="grid"?r=n.gridTemplateColumns.split(" ").length:r=parseInt(n.columnCount)||parseInt(n.columns)||parseInt(n.WebkitColumnCount)||parseInt(n.MozColumnCount),r=r||2,this.columnCount!==r&&(this.columnCount=r,this.distributeItems())},distributeItems(){var n;const l=Array.from({length:this.columnCount},(r,s)=>({id:`column-${s}`,items:[],height:0}));(n=this.resources)!=null&&n.length&&this.resources.forEach(r=>{var e,t;let s=1;r.output_file&&((e=r.output_file)!=null&&e.height)&&((t=r.output_file)!=null&&t.width)&&(s=r.output_file.height/r.output_file.width);let i=l[0];for(const a of l)a.height<i.height&&(i=a);i.items.push(r),i.height+=s}),this.set=l.map(({id:r,items:s})=>({id:r,items:s}))}}))}function Xt(){v.data("billing",()=>({orders:[],init(){this.getOrders()},cancelSubscription(){f.delete("/billing/subscription").then(()=>{w.success("Subscription cancelled!"),window.modal.close(),window.location.reload()})},getOrders(){f.get("/billing/orders",{sort:"created_at:desc",limit:3}).then(l=>l.json()).then(l=>this.orders=l.data)}})),v.data("plans",()=>({state:"initial",plans:{monthly:[],yearly:[],lifetime:[]},freePlan:null,cycle:null,showSwitch:!1,init(){re().then(l=>{if(!l){this.state="empty";return}let n=l.filter(r=>r.price===0&&["monthly","yearly"].includes(r.billing_cycle));n.length==1&&(this.freePlan=n[0]),["monthly","yearly","lifetime"].forEach(r=>{this.plans[r]=l.filter(s=>s.billing_cycle===r&&(!this.freePlan||s.id!==this.freePlan.id))}),this.plans.monthly.length>0?this.cycle="monthly":this.plans.yearly.length>0?this.cycle="yearly":this.plans.lifetime.length>0&&(this.cycle="lifetime"),this.$store.workspace.is_eligible_for_free_plan||(this.freePlan=null),this.state=this.freePlan||this.plans.monthly.length>0||this.plans.yearly.length>0||this.plans.lifetime.length>0?"normal":"empty",this.showSwitch=Object.values(this.plans).map(r=>r.length).filter(r=>r>0).length>=2})}})),v.data("packs",()=>({state:"initial",packs:[],init(){re().then(l=>{if(!l){this.state="empty";return}this.packs=l.filter(n=>n.billing_cycle==="one-time"),this.state=this.packs.length>0?"normal":"empty"})}})),v.data("customCredits",l=>({isProcessing:!1,currency:null,amount:null,value:null,min:null,max:null,rate:0,packs:[],invalidValue:!1,init(){this.currency=JSON.parse(l.currency),this.rate=l.rate||0,this.min=parseFloat(l.min||0),this.max=parseFloat(l.max||0),this.$watch("value",()=>{this.invalidValue=!1;let n=this.value.replace(/,/g,"").replace(/ /g,"").trim();n.length>0&&(n=parseFloat(n)*Math.pow(10,this.currency.fraction_digits).toFixed(0),this.amount=n,(this.min!==0&&n<this.min||this.max!==0&&n>this.max)&&(this.invalidValue=!0))}),re().then(n=>{this.packs=n.filter(r=>r.billing_cycle==="one-time")})}}))}var b={},le,Ve;function Jt(){return Ve||(Ve=1,le=function(n){return n=n||window.navigator.userAgent,/Android/i.test(n)}),le}var he,Fe;function Qt(){return Fe||(Fe=1,he=Jt()),he}var ue,Be;function Zt(){return Be||(Be=1,ue=function(n){return n=n||window.navigator.userAgent,/CrOS/i.test(n)}),ue}var de,qe;function ei(){return qe||(qe=1,de=Zt()),de}var ce,Ue;function ti(){return Ue||(Ue=1,ce=function(n){return n=n||window.navigator.userAgent,n.indexOf("Edge/")!==-1||n.indexOf("Edg/")!==-1}),ce}var fe,je;function ii(){return je||(je=1,fe=function(n){return n=n||window.navigator.userAgent,/SamsungBrowser/i.test(n)}),fe}var pe,Ne;function ri(){return Ne||(Ne=1,pe=function(n){return n=n||window.navigator.userAgent,n.indexOf("DuckDuckGo/")!==-1}),pe}var me,He;function si(){return He||(He=1,me=function(n){return n=n||window.navigator.userAgent,n.indexOf("OPR/")!==-1||n.indexOf("Opera/")!==-1||n.indexOf("OPT/")!==-1}),me}var ge,ze;function ni(){return ze||(ze=1,ge=function(n){return n=n||window.navigator.userAgent,n.indexOf("Silk/")!==-1}),ge}var ye,We;function ai(){if(We)return ye;We=1;var l=ti(),n=ii(),r=ri(),s=si(),i=ni();return ye=function(t){return t=t||window.navigator.userAgent,(t.indexOf("Chrome")!==-1||t.indexOf("CriOS")!==-1)&&!l(t)&&!n(t)&&!r(t)&&!s(t)&&!i(t)},ye}var ve,Ke;function oi(){return Ke||(Ke=1,ve=ai()),ve}var we,Ye;function li(){return Ye||(Ye=1,we=function(n,r){return n=n||window.navigator.userAgent,r=r||window.document,/Mac|iPad/i.test(n)&&"ontouchend"in r}),we}var _e,Ge;function hi(){if(Ge)return _e;Ge=1;var l=li();return _e=function(r,s,i){s===void 0&&(s=!0),r=r||window.navigator.userAgent;var e=/iPhone|iPod|iPad/i.test(r);return s?e||l(r,i):e},_e}var Pe,Xe;function ui(){return Xe||(Xe=1,Pe=hi()),Pe}var be,Je;function di(){return Je||(Je=1,be=function(n){return n=n||window.navigator.userAgent,n.indexOf("MSIE 9")!==-1}),be}var Ee,Qe;function ci(){return Qe||(Qe=1,Ee=di()),Ee}var Ze;function Lt(){if(Ze)return b;Ze=1,Object.defineProperty(b,"__esModule",{value:!0}),b.isIos=b.isIE9=b.isSamsungBrowser=b.isAndroidChrome=b.isKitKatWebview=void 0;var l=typeof window<"u"&&window.navigator&&window.navigator.userAgent,n=Qt(),r=ei(),s=oi(),i=ui();b.isIos=i;var e=ci();b.isIE9=e;var t=/Version\/\d\.\d* Chrome\/\d*\.0\.0\.0/;function a(d){return!s(d)&&d.indexOf("Samsung")>-1}function o(d){return d===void 0&&(d=l),n(d)&&t.test(d)}b.isKitKatWebview=o;function h(d){return d===void 0&&(d=l),(n(d)||r(d))&&s(d)}b.isAndroidChrome=h;function u(d){return d===void 0&&(d=l),/SamsungBrowser/.test(d)||a(d)}return b.isSamsungBrowser=u,b}var xe,et;function fi(){if(et)return xe;et=1;var l=Lt();return xe=function(){return!(0,l.isSamsungBrowser)()},xe}var I={},R={},M={},tt;function pi(){if(tt)return M;tt=1,Object.defineProperty(M,"__esModule",{value:!0}),M.StrategyInterface=void 0;var l=function(){function n(r){this.inputElement=r.element,this.isFormatted=!1}return n}();return M.StrategyInterface=l,M}var L={},A={},it;function te(){if(it)return A;it=1,Object.defineProperty(A,"__esModule",{value:!0}),A.set=A.get=void 0;function l(r){var s=r.selectionStart||0,i=r.selectionEnd||0;return{start:s,end:i,delta:Math.abs(i-s)}}A.get=l;function n(r,s,i){document.activeElement===r&&r.setSelectionRange&&r.setSelectionRange(s,i)}return A.set=n,A}var rt;function se(){if(rt)return L;rt=1,Object.defineProperty(L,"__esModule",{value:!0}),L.keyCannotMutateValue=void 0;var l=te();function n(r){var s=r.currentTarget||r.srcElement,i=(0,l.get)(s),e=i.start===0,t=i.start===s.value.length,a=r.shiftKey===!0;switch(r.key){case void 0:case"Unidentified":case"":break;case"Backspace":return e;case"Del":case"Delete":return t;default:return r.key.length!==1}switch(r.keyCode){case 9:case 19:case 20:case 27:case 39:case 45:return!0;case 33:case 34:case 35:case 36:case 37:case 38:case 40:return!a;case 8:return e;case 46:return t;default:return!1}}return L.keyCannotMutateValue=n,L}var V={},st;function Vt(){if(st)return V;st=1,Object.defineProperty(V,"__esModule",{value:!0}),V.isBackspace=void 0;function l(n){return n.key==="Backspace"||n.keyCode===8}return V.isBackspace=l,V}var F={},nt;function mi(){if(nt)return F;nt=1,Object.defineProperty(F,"__esModule",{value:!0}),F.isDelete=void 0;var l=/^Del(ete)?$/;function n(r){return l.test(r.key)||r.keyCode===46}return F.isDelete=n,F}var B={},q={},at;function gi(){if(at)return q;at=1,Object.defineProperty(q,"__esModule",{value:!0}),q.parsePattern=void 0;var l=/[A-Za-z]/,n=/\d/,r=/./,s=/^[A-Za-z0-9\*]$/,i="({{[^}]+}})",e="(\\s|\\S)",t=new RegExp(i+"|"+e,"g"),a=new RegExp("^"+i+"$"),o=new RegExp("{|}","g");function h(p){return n.test(p)}function u(p){return l.test(p)}function d(p){return h(p)?n:u(p)?l:r}function c(p){return s.test(p)}function g(p){return a.test(p)}function m(p){var y=[],_=p.match(t);if(!_)return y;for(var E=0,C=0;C<_.length;C++){var ae=_[C];if(g(ae))for(var Te=ae.replace(o,"").split(""),oe=0;oe<Te.length;oe++){var Oe=Te[oe];if(!c(Oe))throw new Error("Only alphanumeric or wildcard pattern matchers are allowed");y.push({value:d(Oe),isPermaChar:!1,index:E++})}else y.push({value:ae,isPermaChar:!0,index:E++})}return y}return q.parsePattern=m,q}var ot;function yi(){if(ot)return B;ot=1,Object.defineProperty(B,"__esModule",{value:!0}),B.PatternFormatter=void 0;var l=gi(),n=Vt(),r=function(){function s(i){this.pattern=(0,l.parsePattern)(i)}return s.prototype.format=function(i){for(var e=i.value,t=0,a="",o={start:i.selection.start,end:i.selection.end},h=0;h<this.pattern.length;h++){var u=this.pattern[h],d=e[t];if(t>e.length)break;if(typeof u.value=="string")(d!=null||a.length===u.index)&&(a+=u.value,u.index<=o.start&&o.start++,u.index<=o.end&&o.end++);else for(;t<e.length;t++)if(d=e[t],u.value.test(d)){a+=d,t++;break}else u.index<=o.start&&o.start--,u.index<=o.end&&o.end--}return{value:a,selection:o}},s.prototype.unformat=function(i){for(var e=i.selection.start,t=i.selection.end,a="",o=0;o<this.pattern.length;o++){var h=this.pattern[o];if(typeof h.value!="string"&&i.value[o]!=null&&h.value.test(i.value[o])){a+=i.value[o];continue}h.value===i.value[h.index]&&(h.index<i.selection.start&&e--,h.index<i.selection.end&&t--)}return{selection:{start:e,end:t},value:a}},s.prototype.simulateDeletion=function(i){var e,t,a=this.unformat(i),o=a.value,h=a.selection,u=Math.abs(a.selection.end-a.selection.start);return u?(e=h.start,t=h.end):(0,n.isBackspace)(i.event)?(e=Math.max(0,h.start-1),t=h.start):(e=h.start,t=Math.min(o.length,h.start+1)),{selection:{start:e,end:e},value:o.substr(0,e)+o.substr(t)}},s}();return B.PatternFormatter=r,B}var lt;function ne(){if(lt)return R;lt=1;var l=R&&R.__extends||function(){var h=function(u,d){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,g){c.__proto__=g}||function(c,g){for(var m in g)Object.prototype.hasOwnProperty.call(g,m)&&(c[m]=g[m])},h(u,d)};return function(u,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");h(u,d);function c(){this.constructor=u}u.prototype=d===null?Object.create(d):(c.prototype=d.prototype,new c)}}();Object.defineProperty(R,"__esModule",{value:!0}),R.BaseStrategy=void 0;var n=pi(),r=se(),s=te(),i=Vt(),e=mi(),t=yi();function a(h){return!h.key&&!h.keyCode}var o=function(h){l(u,h);function u(d){var c=h.call(this,d)||this;return c.hasKeypressEvent=!1,c.formatter=new t.PatternFormatter(d.pattern),c.onPasteEvent=d.onPasteEvent,c.attachListeners(),c.formatIfNotEmpty(),c}return u.prototype.getUnformattedValue=function(d){var c=this.inputElement.value;return(d||this.isFormatted)&&(c=this.formatter.unformat({value:this.inputElement.value,selection:{start:0,end:0}}).value),c},u.prototype.formatIfNotEmpty=function(){this.inputElement.value&&this.reformatInput()},u.prototype.setPattern=function(d){this.unformatInput(),this.formatter=new t.PatternFormatter(d),this.formatIfNotEmpty()},u.prototype.attachListeners=function(){var d=this;this.inputElement.addEventListener("keydown",function(c){var g=c;a(g)&&(d.isFormatted=!1),!(0,r.keyCannotMutateValue)(g)&&d.isDeletion(g)&&d.unformatInput()}),this.inputElement.addEventListener("keypress",function(c){d.hasKeypressEvent=!0,d.onKeypress(c)}),this.inputElement.addEventListener("keyup",function(){d.reformatInput(),d.hasKeypressEvent=!1}),this.inputElement.addEventListener("input",function(c){var g=c;d.hasKeypressEvent||d.onKeypress(c),(g instanceof CustomEvent||!g.isTrusted)&&(d.isFormatted=!1),d.reformatInput()}),this.inputElement.addEventListener("paste",function(c){d.pasteEventHandler(c)})},u.prototype.isDeletion=function(d){return(0,e.isDelete)(d)||(0,i.isBackspace)(d)},u.prototype.reformatInput=function(){if(!this.isFormatted){this.isFormatted=!0;var d=this.inputElement,c=this.formatter.format({selection:(0,s.get)(d),value:d.value});d.value=c.value,(0,s.set)(d,c.selection.start,c.selection.end),this.afterReformatInput(c)}},u.prototype.afterReformatInput=function(d){},u.prototype.unformatInput=function(){if(this.isFormatted){this.isFormatted=!1;var d=this.inputElement,c=(0,s.get)(d),g=this.formatter.unformat({selection:c,value:d.value});d.value=g.value,(0,s.set)(d,g.selection.start,g.selection.end)}},u.prototype.prePasteEventHandler=function(d){d.preventDefault()},u.prototype.postPasteEventHandler=function(){this.reformatAfterPaste()},u.prototype.pasteEventHandler=function(d){var c,g="";this.prePasteEventHandler(d),this.unformatInput(),d.clipboardData?g=d.clipboardData.getData("Text"):window.clipboardData&&(g=window.clipboardData.getData("Text"));var m=(0,s.get)(this.inputElement);c=this.inputElement.value.split(""),c.splice(m.start,m.end-m.start,g),c=c.join(""),this.onPasteEvent&&this.onPasteEvent({unformattedInputValue:c}),this.inputElement.value=c,(0,s.set)(this.inputElement,m.start+g.length,m.start+g.length),this.postPasteEventHandler()},u.prototype.reformatAfterPaste=function(){var d=document.createEvent("Event");this.reformatInput(),d.initEvent("input",!0,!0),this.inputElement.dispatchEvent(d)},u.prototype.getStateToFormat=function(){var d=this.inputElement,c=(0,s.get)(d),g={selection:c,value:d.value};return this.stateToFormat?(g=this.stateToFormat,delete this.stateToFormat):c.start===d.value.length&&this.isFormatted&&(g=this.formatter.unformat(g)),g},u.prototype.onKeypress=function(d){a(d)&&(this.isFormatted=!1),!(0,r.keyCannotMutateValue)(d)&&this.unformatInput()},u}(n.StrategyInterface);return R.BaseStrategy=o,R}var ht;function vi(){if(ht)return I;ht=1;var l=I&&I.__extends||function(){var e=function(t,a){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,h){o.__proto__=h}||function(o,h){for(var u in h)Object.prototype.hasOwnProperty.call(h,u)&&(o[u]=h[u])},e(t,a)};return function(t,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");e(t,a);function o(){this.constructor=t}t.prototype=a===null?Object.create(a):(o.prototype=a.prototype,new o)}}();Object.defineProperty(I,"__esModule",{value:!0}),I.IosStrategy=void 0;var n=ne(),r=se(),s=te(),i=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getUnformattedValue=function(){return e.prototype.getUnformattedValue.call(this,!0)},t.prototype.attachListeners=function(){var a=this;this.inputElement.addEventListener("keydown",function(o){a.keydownListener(o)}),this.inputElement.addEventListener("input",function(o){var h=o instanceof CustomEvent;h&&(a.stateToFormat={selection:{start:0,end:0},value:a.inputElement.value}),a.formatListener(),h||a.fixLeadingBlankSpaceOnIos()}),this.inputElement.addEventListener("paste",function(o){a.pasteEventHandler(o)})},t.prototype.fixLeadingBlankSpaceOnIos=function(){var a=this.inputElement;a.value===""&&setTimeout(function(){a.value=""},0)},t.prototype.formatListener=function(){var a=this.inputElement,o=this.getStateToFormat(),h=this.formatter.format(o);a.value=h.value,(0,s.set)(a,h.selection.start,h.selection.end)},t.prototype.keydownListener=function(a){(0,r.keyCannotMutateValue)(a)||this.isDeletion(a)&&(this.stateToFormat=this.formatter.simulateDeletion({event:a,selection:(0,s.get)(this.inputElement),value:this.inputElement.value}))},t}(n.BaseStrategy);return I.IosStrategy=i,I}var $={},ut;function Ft(){if(ut)return $;ut=1;var l=$&&$.__extends||function(){var e=function(t,a){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,h){o.__proto__=h}||function(o,h){for(var u in h)Object.prototype.hasOwnProperty.call(h,u)&&(o[u]=h[u])},e(t,a)};return function(t,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");e(t,a);function o(){this.constructor=t}t.prototype=a===null?Object.create(a):(o.prototype=a.prototype,new o)}}();Object.defineProperty($,"__esModule",{value:!0}),$.AndroidChromeStrategy=void 0;var n=se(),r=ne(),s=te(),i=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.attachListeners=function(){var a=this;this.inputElement.addEventListener("keydown",function(o){(0,n.keyCannotMutateValue)(o)||a.unformatInput()}),this.inputElement.addEventListener("keyup",function(){a.reformatInput()}),this.inputElement.addEventListener("input",function(){a.reformatInput()}),this.inputElement.addEventListener("paste",function(o){o.preventDefault(),a.pasteEventHandler(o)})},t.prototype.prePasteEventHandler=function(){},t.prototype.postPasteEventHandler=function(){var a=this;setTimeout(function(){a.reformatAfterPaste()},0)},t.prototype.afterReformatInput=function(a){var o=this.inputElement;setTimeout(function(){var h=a.selection;(0,s.set)(o,h.end,h.end)},0)},t}(r.BaseStrategy);return $.AndroidChromeStrategy=i,$}var D={},dt;function wi(){if(dt)return D;dt=1;var l=D&&D.__extends||function(){var s=function(i,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])},s(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}();Object.defineProperty(D,"__esModule",{value:!0}),D.KitKatChromiumBasedWebViewStrategy=void 0;var n=Ft(),r=function(s){l(i,s);function i(){return s!==null&&s.apply(this,arguments)||this}return i.prototype.reformatInput=function(){var e=this;setTimeout(function(){s.prototype.reformatInput.call(e)},0)},i.prototype.unformatInput=function(){var e=this;setTimeout(function(){s.prototype.unformatInput.call(e)},0)},i}(n.AndroidChromeStrategy);return D.KitKatChromiumBasedWebViewStrategy=r,D}var T={},ct;function _i(){if(ct)return T;ct=1;var l=T&&T.__extends||function(){var t=function(a,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(h[d]=u[d])},t(a,o)};return function(a,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");t(a,o);function h(){this.constructor=a}a.prototype=o===null?Object.create(o):(h.prototype=o.prototype,new h)}}();Object.defineProperty(T,"__esModule",{value:!0}),T.IE9Strategy=void 0;var n=ne(),r=se(),s=te();function i(t,a){return{start:t.start+a,end:t.end+a}}var e=function(t){l(a,t);function a(){return t!==null&&t.apply(this,arguments)||this}return a.prototype.getUnformattedValue=function(){return n.BaseStrategy.prototype.getUnformattedValue.call(this,!0)},a.prototype.attachListeners=function(){var o=this;this.inputElement.addEventListener("keydown",function(h){o.keydownListener(h)}),this.inputElement.addEventListener("focus",function(){o.format()}),this.inputElement.addEventListener("paste",function(h){o.pasteEventHandler(h)})},a.prototype.format=function(){var o=this.inputElement,h=this.getStateToFormat(),u=this.formatter.format(h);o.value=u.value,(0,s.set)(o,u.selection.start,u.selection.end)},a.prototype.keydownListener=function(o){if(!(0,r.keyCannotMutateValue)(o)){if(o.preventDefault(),this.isDeletion(o))this.stateToFormat=this.formatter.simulateDeletion({event:o,selection:(0,s.get)(this.inputElement),value:this.inputElement.value});else{var h=this.inputElement.value,u=(0,s.get)(this.inputElement),d=h.slice(0,u.start)+o.key+h.slice(u.start);u=i(u,1),this.stateToFormat={selection:u,value:d},u.start===d.length&&(this.stateToFormat=this.formatter.unformat(this.stateToFormat))}this.format()}},a.prototype.reformatAfterPaste=function(){var o=this.inputElement,h=(0,s.get)(this.inputElement),u=this.formatter.format({selection:h,value:o.value}).value;h=i(h,1),o.value=u,setTimeout(function(){(0,s.set)(o,h.start,h.end)},0)},a}(n.BaseStrategy);return T.IE9Strategy=e,T}var Se,ft;function Pi(){if(ft)return Se;ft=1;var l=Lt(),n=fi(),r=vi(),s=Ft(),i=wi(),e=_i(),t=ne(),a=function(){function o(h){(0,l.isIos)()?this.strategy=new r.IosStrategy(h):(0,l.isKitKatWebview)()?this.strategy=new i.KitKatChromiumBasedWebViewStrategy(h):(0,l.isAndroidChrome)()?this.strategy=new s.AndroidChromeStrategy(h):(0,l.isIE9)()?this.strategy=new e.IE9Strategy(h):this.strategy=new t.BaseStrategy(h)}return o.prototype.getUnformattedValue=function(){return this.strategy.getUnformattedValue()},o.prototype.setPattern=function(h){this.strategy.setPattern(h)},o.supportsFormatting=function(){return n()},o}();return Se=a,Se}var ke,pt;function bi(){if(pt)return ke;pt=1;var l=Pi();return ke=l,ke}var Ei=bi();const xi=Ot(Ei);var Ce,mt;function Si(){if(mt)return Ce;mt=1;var l={visa:{niceType:"Visa",type:"visa",patterns:[4],gaps:[4,8,12],lengths:[16,18,19],code:{name:"CVV",size:3}},mastercard:{niceType:"Mastercard",type:"mastercard",patterns:[[51,55],[2221,2229],[223,229],[23,26],[270,271],2720],gaps:[4,8,12],lengths:[16],code:{name:"CVC",size:3}},"american-express":{niceType:"American Express",type:"american-express",patterns:[34,37],gaps:[4,10],lengths:[15],code:{name:"CID",size:4}},"diners-club":{niceType:"Diners Club",type:"diners-club",patterns:[[300,305],36,38,39],gaps:[4,10],lengths:[14,16,19],code:{name:"CVV",size:3}},discover:{niceType:"Discover",type:"discover",patterns:[6011,[644,649],65],gaps:[4,8,12],lengths:[16,19],code:{name:"CID",size:3}},jcb:{niceType:"JCB",type:"jcb",patterns:[2131,1800,[3528,3589]],gaps:[4,8,12],lengths:[16,17,18,19],code:{name:"CVV",size:3}},unionpay:{niceType:"UnionPay",type:"unionpay",patterns:[620,[62100,62182],[62184,62187],[62185,62197],[62200,62205],[622010,622999],622018,[62207,62209],[623,626],6270,6272,6276,[627700,627779],[627781,627799],[6282,6289],6291,6292,810,[8110,8131],[8132,8151],[8152,8163],[8164,8171]],gaps:[4,8,12],lengths:[14,15,16,17,18,19],code:{name:"CVN",size:3}},maestro:{niceType:"Maestro",type:"maestro",patterns:[493698,[5e5,504174],[504176,506698],[506779,508999],[56,59],63,67,6],gaps:[4,8,12],lengths:[12,13,14,15,16,17,18,19],code:{name:"CVC",size:3}},elo:{niceType:"Elo",type:"elo",patterns:[401178,401179,438935,457631,457632,431274,451416,457393,504175,[506699,506778],[509e3,509999],627780,636297,636368,[650031,650033],[650035,650051],[650405,650439],[650485,650538],[650541,650598],[650700,650718],[650720,650727],[650901,650978],[651652,651679],[655e3,655019],[655021,655058]],gaps:[4,8,12],lengths:[16],code:{name:"CVE",size:3}},mir:{niceType:"Mir",type:"mir",patterns:[[2200,2204]],gaps:[4,8,12],lengths:[16,17,18,19],code:{name:"CVP2",size:3}},hiper:{niceType:"Hiper",type:"hiper",patterns:[637095,63737423,63743358,637568,637599,637609,637612],gaps:[4,8,12],lengths:[16],code:{name:"CVC",size:3}},hipercard:{niceType:"Hipercard",type:"hipercard",patterns:[606282],gaps:[4,8,12],lengths:[16],code:{name:"CVC",size:3}}};return Ce=l,Ce}var U={},j={},gt;function Bt(){if(gt)return j;gt=1,Object.defineProperty(j,"__esModule",{value:!0}),j.clone=void 0;function l(n){return n?JSON.parse(JSON.stringify(n)):null}return j.clone=l,j}var N={},yt;function ki(){if(yt)return N;yt=1,Object.defineProperty(N,"__esModule",{value:!0}),N.matches=void 0;function l(s,i,e){var t=String(i).length,a=s.substr(0,t),o=parseInt(a,10);return i=parseInt(String(i).substr(0,a.length),10),e=parseInt(String(e).substr(0,a.length),10),o>=i&&o<=e}function n(s,i){return i=String(i),i.substring(0,s.length)===s.substring(0,i.length)}function r(s,i){return Array.isArray(i)?l(s,i[0],i[1]):n(s,i)}return N.matches=r,N}var vt;function Ci(){if(vt)return U;vt=1,Object.defineProperty(U,"__esModule",{value:!0}),U.addMatchingCardsToResults=void 0;var l=Bt(),n=ki();function r(s,i,e){var t,a;for(t=0;t<i.patterns.length;t++){var o=i.patterns[t];if((0,n.matches)(s,o)){var h=(0,l.clone)(i);Array.isArray(o)?a=String(o[0]).length:a=String(o).length,s.length>=a&&(h.matchStrength=a),e.push(h);break}}}return U.addMatchingCardsToResults=r,U}var H={},wt;function Ii(){if(wt)return H;wt=1,Object.defineProperty(H,"__esModule",{value:!0}),H.isValidInputType=void 0;function l(n){return typeof n=="string"||n instanceof String}return H.isValidInputType=l,H}var z={},_t;function Ri(){if(_t)return z;_t=1,Object.defineProperty(z,"__esModule",{value:!0}),z.findBestMatch=void 0;function l(r){var s=r.filter(function(i){return i.matchStrength}).length;return s>0&&s===r.length}function n(r){return l(r)?r.reduce(function(s,i){return!s||Number(s.matchStrength)<Number(i.matchStrength)?i:s}):null}return z.findBestMatch=n,z}var W,Pt;function qt(){if(Pt)return W;Pt=1;var l=W&&W.__assign||function(){return l=Object.assign||function(m){for(var p,y=1,_=arguments.length;y<_;y++){p=arguments[y];for(var E in p)Object.prototype.hasOwnProperty.call(p,E)&&(m[E]=p[E])}return m},l.apply(this,arguments)},n=Si(),r=Ci(),s=Ii(),i=Ri(),e=Bt(),t={},a={VISA:"visa",MASTERCARD:"mastercard",AMERICAN_EXPRESS:"american-express",DINERS_CLUB:"diners-club",DISCOVER:"discover",JCB:"jcb",UNIONPAY:"unionpay",MAESTRO:"maestro",ELO:"elo",MIR:"mir",HIPER:"hiper",HIPERCARD:"hipercard"},o=[a.VISA,a.MASTERCARD,a.AMERICAN_EXPRESS,a.DINERS_CLUB,a.DISCOVER,a.JCB,a.UNIONPAY,a.MAESTRO,a.ELO,a.MIR,a.HIPER,a.HIPERCARD],h=(0,e.clone)(o);function u(m){return t[m]||n[m]}function d(){return h.map(function(m){return(0,e.clone)(u(m))})}function c(m,p){p===void 0&&(p=!1);var y=h.indexOf(m);if(!p&&y===-1)throw new Error('"'+m+'" is not a supported card type.');return y}function g(m){var p=[];if(!(0,s.isValidInputType)(m))return p;if(m.length===0)return d();h.forEach(function(_){var E=u(_);(0,r.addMatchingCardsToResults)(m,E,p)});var y=(0,i.findBestMatch)(p);return y?[y]:p}return g.getTypeInfo=function(m){return(0,e.clone)(u(m))},g.removeCard=function(m){var p=c(m);h.splice(p,1)},g.addCard=function(m){var p=c(m.type,!0);t[m.type]=m,p===-1&&h.push(m.type)},g.updateCard=function(m,p){var y=t[m]||n[m];if(!y)throw new Error('"'.concat(m,"\" is not a recognized type. Use `addCard` instead.'"));if(p.type&&y.type!==p.type)throw new Error("Cannot overwrite type parameter.");var _=(0,e.clone)(y);_=l(l({},_),p),t[_.type]=_},g.changeOrder=function(m,p){var y=c(m);h.splice(y,1),h.splice(p,0,m)},g.resetModifications=function(){h=(0,e.clone)(o),t={}},g.types=a,W=g,W}var K={},bt;function Ai(){if(bt)return K;bt=1,Object.defineProperty(K,"__esModule",{value:!0}),K.cardholderName=void 0;var l=/^[\d\s-]*$/,n=255;function r(i,e){return{isValid:i,isPotentiallyValid:e}}function s(i){return typeof i!="string"?r(!1,!1):i.length===0?r(!1,!0):i.length>n?r(!1,!1):l.test(i)?r(!1,!0):r(!0,!0)}return K.cardholderName=s,K}var Y={},Ie,Et;function $i(){if(Et)return Ie;Et=1;function l(n){for(var r=0,s=!1,i=n.length-1,e;i>=0;)e=parseInt(n.charAt(i),10),s&&(e*=2,e>9&&(e=e%10+1)),s=!s,r+=e,i--;return r%10===0}return Ie=l,Ie}var xt;function Di(){if(xt)return Y;xt=1,Object.defineProperty(Y,"__esModule",{value:!0}),Y.cardNumber=void 0;var l=$i(),n=qt();function r(i,e,t){return{card:i,isPotentiallyValid:e,isValid:t}}function s(i,e){e===void 0&&(e={});var t,a,o;if(typeof i!="string"&&typeof i!="number")return r(null,!1,!1);var h=String(i).replace(/-|\s/g,"");if(!/^\d*$/.test(h))return r(null,!1,!1);var u=n(h);if(u.length===0)return r(null,!1,!1);if(u.length!==1)return r(null,!0,!1);var d=u[0];if(e.maxLength&&h.length>e.maxLength)return r(d,!1,!1);e.skipLuhnValidation===!0||d.type===n.types.UNIONPAY&&e.luhnValidateUnionPay!==!0?a=!0:a=l(h),o=Math.max.apply(null,d.lengths),e.maxLength&&(o=Math.min(e.maxLength,o));for(var c=0;c<d.lengths.length;c++)if(d.lengths[c]===h.length)return t=h.length<o||a,r(d,t,a);return r(d,h.length<o,!1)}return Y.cardNumber=s,Y}var O={},G={},X={},St;function Ae(){if(St)return X;St=1,Object.defineProperty(X,"__esModule",{value:!0}),X.expirationYear=void 0;var l=19;function n(s,i,e){return{isValid:s,isPotentiallyValid:i,isCurrentYear:e||!1}}function r(s,i){i===void 0&&(i=l);var e;if(typeof s!="string")return n(!1,!1);if(s.replace(/\s/g,"")==="")return n(!1,!0);if(!/^\d*$/.test(s))return n(!1,!1);var t=s.length;if(t<2)return n(!1,!0);var a=new Date().getFullYear();if(t===3){var o=s.slice(0,2),h=String(a).slice(0,2);return n(!1,o===h)}if(t>4)return n(!1,!1);var u=parseInt(s,10),d=Number(String(a).substr(2,2)),c=!1;if(t===2){if(String(a).substr(0,2)===s)return n(!1,!0);e=d===u,c=u>=d&&u<=d+i}else t===4&&(e=a===u,c=u>=a&&u<=a+i);return n(c,c,e)}return X.expirationYear=r,X}var J={},kt;function Ti(){return kt||(kt=1,Object.defineProperty(J,"__esModule",{value:!0}),J.isArray=void 0,J.isArray=Array.isArray||function(l){return Object.prototype.toString.call(l)==="[object Array]"}),J}var Ct;function Oi(){if(Ct)return G;Ct=1,Object.defineProperty(G,"__esModule",{value:!0}),G.parseDate=void 0;var l=Ae(),n=Ti();function r(i){var e=Number(i[0]),t;return e===0?2:e>1||e===1&&Number(i[1])>2?1:e===1?(t=i.substr(1),(0,l.expirationYear)(t).isPotentiallyValid?1:2):i.length===5?1:i.length>5?2:1}function s(i){var e;if(/^\d{4}-\d{1,2}$/.test(i)?e=i.split("-").reverse():/\//.test(i)?e=i.split(/\s*\/\s*/g):/\s/.test(i)&&(e=i.split(/ +/g)),(0,n.isArray)(e))return{month:e[0]||"",year:e.slice(1).join()};var t=r(i),a=i.substr(0,t);return{month:a,year:i.substr(a.length)}}return G.parseDate=s,G}var Q={},It;function Ut(){if(It)return Q;It=1,Object.defineProperty(Q,"__esModule",{value:!0}),Q.expirationMonth=void 0;function l(r,s,i){return{isValid:r,isPotentiallyValid:s,isValidForThisYear:i||!1}}function n(r){var s=new Date().getMonth()+1;if(typeof r!="string")return l(!1,!1);if(r.replace(/\s/g,"")===""||r==="0")return l(!1,!0);if(!/^\d*$/.test(r))return l(!1,!1);var i=parseInt(r,10);if(isNaN(Number(r)))return l(!1,!1);var e=i>0&&i<13;return l(e,e,e&&i>=s)}return Q.expirationMonth=n,Q}var Rt;function Mi(){if(Rt)return O;Rt=1;var l=O&&O.__assign||function(){return l=Object.assign||function(t){for(var a,o=1,h=arguments.length;o<h;o++){a=arguments[o];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},l.apply(this,arguments)};Object.defineProperty(O,"__esModule",{value:!0}),O.expirationDate=void 0;var n=Oi(),r=Ut(),s=Ae();function i(t,a,o,h){return{isValid:t,isPotentiallyValid:a,month:o,year:h}}function e(t,a){var o;if(typeof t=="string")t=t.replace(/^(\d\d) (\d\d(\d\d)?)$/,"$1/$2"),o=(0,n.parseDate)(String(t));else if(t!==null&&typeof t=="object"){var h=l({},t);o={month:String(h.month),year:String(h.year)}}else return i(!1,!1,null,null);var u=(0,r.expirationMonth)(o.month),d=(0,s.expirationYear)(o.year,a);if(u.isValid){if(d.isCurrentYear){var c=u.isValidForThisYear;return i(c,c,o.month,o.year)}if(d.isValid)return i(!0,!0,o.month,o.year)}return u.isPotentiallyValid&&d.isPotentiallyValid?i(!1,!0,null,null):i(!1,!1,null,null)}return O.expirationDate=e,O}var Z={},At;function Li(){if(At)return Z;At=1,Object.defineProperty(Z,"__esModule",{value:!0}),Z.cvv=void 0;var l=3;function n(e,t){for(var a=0;a<e.length;a++)if(t===e[a])return!0;return!1}function r(e){for(var t=l,a=0;a<e.length;a++)t=e[a]>t?e[a]:t;return t}function s(e,t){return{isValid:e,isPotentiallyValid:t}}function i(e,t){return t===void 0&&(t=l),t=t instanceof Array?t:[t],typeof e!="string"||!/^\d*$/.test(e)?s(!1,!1):n(t,e.length)?s(!0,!0):e.length<Math.min.apply(null,t)?s(!1,!0):e.length>r(t)?s(!1,!1):s(!0,!0)}return Z.cvv=i,Z}var ee={},$t;function Vi(){if($t)return ee;$t=1,Object.defineProperty(ee,"__esModule",{value:!0}),ee.postalCode=void 0;var l=3,n=new RegExp(/^[a-z0-9]+$/i);function r(i,e){return{isValid:i,isPotentiallyValid:e}}function s(i,e){e===void 0&&(e={});var t=e.minLength||l;return typeof i!="string"?r(!1,!1):i.length<t?r(!1,!0):n.test(i.trim().slice(0,t))?r(!0,!0):r(!1,!0)}return ee.postalCode=s,ee}var k,Dt;function Fi(){if(Dt)return k;Dt=1;var l=k&&k.__createBinding||(Object.create?function(c,g,m,p){p===void 0&&(p=m);var y=Object.getOwnPropertyDescriptor(g,m);(!y||("get"in y?!g.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return g[m]}}),Object.defineProperty(c,p,y)}:function(c,g,m,p){p===void 0&&(p=m),c[p]=g[m]}),n=k&&k.__setModuleDefault||(Object.create?function(c,g){Object.defineProperty(c,"default",{enumerable:!0,value:g})}:function(c,g){c.default=g}),r=k&&k.__importStar||function(c){if(c&&c.__esModule)return c;var g={};if(c!=null)for(var m in c)m!=="default"&&Object.prototype.hasOwnProperty.call(c,m)&&l(g,c,m);return n(g,c),g},s=r(qt()),i=Ai(),e=Di(),t=Mi(),a=Ut(),o=Ae(),h=Li(),u=Vi(),d={creditCardType:s,cardholderName:i.cardholderName,number:e.cardNumber,expirationDate:t.expirationDate,expirationMonth:a.expirationMonth,expirationYear:o.expirationYear,cvv:h.cvv,postalCode:u.postalCode};return k=d,k}var Bi=Fi();const S=Ot(Bi);function qi(){v.data("cardForm",()=>({model:{number:"",expiry:"",cvc:""},ri:{number:null,expiry:null,cvc:null},errors:{number:null,expiry:null,cvc:null},error:null,card:{},data:{number:null,expire_month:null,expire_year:null,cvc:null},init(){for(let l in this.ri)this.ri[l]=new xi({element:this.$refs[l],pattern:this.$refs[l].dataset.pattern}),this.$watch("errors."+l,n=>{this.error=this.errors.number||this.errors.expiry||this.errors.cvc});this.cardInput(),this.expiryInput(),this.cvcInput()},cardInput(){this.$watch("model.number",(l,n)=>{this.data.number=null,this.errors.number=null;let r=S.number(l);this.card=r.card||{},r.card&&(this.ri.number.setPattern(this.generateCardInputPattern(r)),this.ri.cvc.setPattern("{{"+"9".repeat(r.card.code.size)+"}}"),this.$refs.cvc.setAttribute("placeholder",r.card.code.name),this.$refs.cvc.setAttribute("maxlength",r.card.code.size),this.model.cvc&&this.model.cvc.length<r.card.code.size&&(this.errors.cvc=x("Your card's security code is incomplete."))),l.length>n.length&&r.isValid&&r.card.type!="unionpay"?(S.expirationDate(this.model.expiry).isValid?S.cvv(this.model.cvc).isValid||this.$refs.cvc.focus():this.$refs.expiry.focus(),this.data.number=l):!r.isValid&&!r.isPotentiallyValid&&(this.errors.number=x("Invalid card number"))}),this.$refs.number.addEventListener("blur-xs",()=>{let l=S.number(this.model.number);!l.isValid&&this.model.number.length>0?this.errors.number=l.isPotentiallyValid?x("Your card number is incomplete."):x("Invalid card number"):this.errors.number=null})},expiryInput(){this.$watch("model.expiry",(l,n)=>{this.data.expire_month=null,this.data.expire_year=null,this.errors.expiry=null;let r=S.expirationDate(l);r.isValid?(S.cvv(this.model.cvc).isValid||this.$refs.cvc.focus(),this.data.expire_month=r.month,this.data.expire_year=r.year):l.length==1&&parseInt(l,10)>1?this.model.expiry="0"+l+"/":l.length==3&&parseInt(l.substring(0,2),10)>"12"&&(this.model.expiry="0"+l[0]+"/"+l[1]),r=S.expirationDate(this.model.expiry),r.isPotentiallyValid||(this.errors.expiry=x("Your card's expiration date is invalid."))}),this.$refs.expiry.addEventListener("blur-xs",()=>{let l=S.expirationDate(this.model.expiry);!l.isValid&&this.model.expiry.length>0?this.errors.expiry=l.isPotentiallyValid?x("Your card's expiration date is incomplete."):x("Your card's expiration date is invalid."):this.errors.expiry=null}),this.$refs.expiry.addEventListener("keyup",l=>{l.key=="Backspace"&&this.model.expiry.length==0&&this.$refs.number.focus()})},cvcInput(){this.$watch("model.cvc",(l,n)=>{this.data.cvc=null,this.errors.cvc=null;let r=S.cvv(l,this.$refs.cvc.getAttribute("maxlength")||3);r.isValid?this.data.cvc=l:r.isPotentiallyValid||(this.errors.cvc=x("Your card's security code is invalid."))}),this.$refs.cvc.addEventListener("blur-xs",()=>{let l=S.cvv(this.model.cvc,this.$refs.cvc.getAttribute("maxlength")||3);!l.isValid&&this.model.cvc.length>0?this.errors.cvc=l.isPotentiallyValid?x("Your card's security code is incomplete."):x("Your card's security code is invalid."):this.errors.cvc=null}),this.$refs.cvc.addEventListener("keyup",l=>{l.key=="Backspace"&&this.model.cvc.length==0&&this.$refs.expiry.focus()})},generateCardInputPattern(l){let n=l.card,r="",s=0;n.gaps.forEach((t,a)=>{const o=t-s;r+="{{"+"9".repeat(o)+"}} ",s=t});const e=Math.max(...n.lengths)-s;return r+="{{"+"9".repeat(e)+"}}",r.trim()},icon(){return`<svg><use xlink:href="#icon-${this.card.type||"default"}"></use></svg>`}})),v.data("stripe",(l,n={})=>({stripe:null,elements:null,element:null,error:null,disabled:!0,options:{type:"card",mode:null,amount:null,currency:"usd"},init(){this.options={...this.options,...n},this.stripe=Stripe(l);let r={};this.options.type!="card"&&(r={locale:document.documentElement.lang?document.documentElement.lang.split("-")[0]:"auto",mode:this.options.mode,amount:this.options.amount,currency:this.options.currency.toLowerCase(),fonts:[{cssSrc:"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700"}],appearance:{theme:"stripe",variables:{fontFamily:"Inter, system-ui, sans-serif",fontSizeBase:"1rem",borderRadius:"0.75rem",colorText:getComputedStyle(document.documentElement).getPropertyValue("--color-content"),colorPrimary:getComputedStyle(document.documentElement).getPropertyValue("--color-content"),colorTextSecondary:getComputedStyle(document.documentElement).getPropertyValue("--color-content-dimmed"),colorBackground:getComputedStyle(document.documentElement).getPropertyValue("--color-main"),colorTextPlaceholder:getComputedStyle(document.documentElement).getPropertyValue("--color-content-super-dimmed"),colorDanger:getComputedStyle(document.documentElement).getPropertyValue("--color-failure"),accordionItemSpacing:"0.25rem",gridColumnSpacing:"0.5rem",gridRowSpacing:"0.5rem",pickerItemSpacing:"0.25rem",fontWeightNormal:"500"},rules:{".AccordionItem":{borderColor:getComputedStyle(document.documentElement).getPropertyValue("--color-line-dimmed"),boxShadow:"none",color:getComputedStyle(document.documentElement).getPropertyValue("--color-content")},".Block":{backgroundColor:getComputedStyle(document.documentElement).getPropertyValue("--color-intermediate"),boxShadow:"none",padding:"1rem",border:"none",borderRadius:"0.875rem"},".BlockDivider":{backgroundColor:getComputedStyle(document.documentElement).getPropertyValue("--color-line")},".Label":{fontSize:"0.875rem",lineHeight:"1.25rem",fontWeight:"600",marginBottom:"0.5rem"},".Error":{fontSize:"0.75rem",lineHeight:"1rem",fontWeight:"500",marginTop:"0.5rem"},".Input, .CodeInput":{borderRadius:"0.5rem",boxShadow:"none",fontSize:"1rem",lineHeight:"1.5rem",padding:"0.6875rem 0.75rem"},".PickerItem":{borderRadius:"0.5rem",boxShadow:"none",fontSize:"0.75rem",lineHeight:"1.25rem",fontWeight:"600"}}}}),this.elements=this.stripe.elements(r),this.options.type=="card"?this.element=this.elements.create("card",{style:{base:{fontSize:"16px",color:getComputedStyle(document.documentElement).getPropertyValue("--color-content")}}}):this.element=this.elements.create("payment",{layout:{type:"accordion",radios:!1,visibleAccordionItemsCount:3}}),this.element.mount(this.$refs.element),this.element.on("change",({complete:s,error:i})=>{this.disabled=!s,this.error=i?i.message:null}),document.addEventListener("coupon.applied",s=>{this.options.type!=="card"&&this.element&&this.elements.update({amount:s.detail.plan.sale_price??s.detail.plan.price})}),document.addEventListener("coupon.removed",s=>{this.options.type!=="card"&&this.element&&this.elements.update({amount:s.detail.plan.sale_price??s.detail.plan.price})})},async submit(){if(this.disabled||this.processing)return;this.processing="stripe";let r,s={gateway:"stripe"};this.options.isCustom?s.amount=this.options.amount:(s.id=this.plan.id,s.coupon=this.coupon.code);try{r=await f.post("/billing/checkout",s)}catch(o){let h=await o.json();this.error=h.message||null,this.disabled=!1,this.processing=null;return}let i=await r.json(),e=i.purchase_token,t=window.location.origin+"/payment-callback/"+i.id+"/stripe",a;if(this.options.type=="card")a=await(e.startsWith("seti_")?this.stripe.confirmCardSetup:this.stripe.confirmCardPayment)(e,{payment_method:{card:this.element}});else{const{error:o}=await this.elements.submit();if(o){this.error=o.message,this.disabled=!1,this.processing=null;return}a=await(e.startsWith("seti_")?this.stripe.confirmSetup:this.stripe.confirmPayment)({elements:this.elements,clientSecret:e,confirmParams:{return_url:t}})}if(a.error)this.error=a.error.message,this.disabled=!1,this.processing=null;else{a.setupIntent?t+="?setup_intent="+a.setupIntent.id:t+="?payment_intent="+a.paymentIntent.id,window.location.href=t;return}}})),v.data("checkout",(l={},n=0,r=!1)=>({plan:l,voiceCount:n,coupon:{code:null,error:null},processing:null,error:null,showAddressForm:!1,proceed:null,applying:!1,offlinePayment:null,init(){this.preCheck()},preCheck(){if(this.plan.member_cap!==null&&this.$store.workspace.users.length+this.$store.workspace.invitations.length>this.plan.member_cap){this.proceed="member_cap";return}if(this.plan.config.voiceover.clone_cap!==null&&this.voiceCount>this.plan.config.voiceover.clone_cap){this.proceed="voice_cap";return}this.proceed=!0},applyCoupon(){this.applying||!this.coupon.code||(this.applying=!0,f.config.toast=!1,f.get("/billing/plans/"+this.plan.id,{coupon:this.coupon.code}).then(s=>{this.plan={...this.plan,...s.data},this.$dispatch("coupon.applied",{plan:this.plan})}).catch(s=>{this.coupon.error=s.message}).finally(()=>{f.config.toast=!0,this.applying=!1}))},removeCoupon(){this.applying||!this.coupon.code||(this.applying=!0,f.get("/billing/plans/"+this.plan.id).then(s=>{this.coupon.code=null,this.coupon.error=null,this.plan={...this.plan,...s.data},this.$dispatch("coupon.removed",{plan:this.plan})}).finally(()=>this.applying=!1))},saveAddress(s,i){this.processing||(this.processing=!0,f.post(`/workspaces/${s}`,new FormData(i)).then(e=>{this.$store.workspace=e.data,this.processing=!1,this.showAddressForm=!1}).catch(e=>this.processing=!1))},purchase(s="",i=null){if(this.processing)return;this.processing=s;let e={gateway:s,card:i};r?e.amount=this.plan.price:(e.id=this.plan.id,e.coupon=this.coupon.code),f.post("/billing/checkout",e).then(t=>t.json()).then(t=>{if(t.redirect){window.location.href=t.redirect;return}if(t.id){window.location.href="app/billing/orders/"+t.id+"/receipt";return}this.processing=null}).catch(t=>{let a="An unexpected error occurred! Please try again later!";this.processing=null,this.error=t.message||a})}}))}function Ui(){v.data("account",l=>({isProcessing:!1,generatingApiKey:!1,user:l,init(){this.user.ip&&this.fetchIpLocation()},async fetchIpLocation(){const n=await zt.getIpInfo(this.user.ip);n&&(this.user.latitude=n.latitude,this.user.longitude=n.longitude)},generateApiKey(){this.generatingApiKey||(this.generatingApiKey=!0,f.post("/account/rest-api-keys").then(n=>{this.user={...this.user,...n.data},window.modal.open("api-modal"),this.generatingApiKey=!1}).catch(n=>this.generatingApiKey=!1))},submit(){if(this.isProcessing)return;this.isProcessing=!0;let n=new jt(this.$refs.form);f.post(`/account${this.$refs.form.dataset.path||""}`,n).then(r=>r.json()).then(r=>{r.jwt&&localStorage.setItem("jwt",r.jwt),this.user={...this.user,...r},this.isProcessing=!1,w.success(this.$refs.form.dataset.successMsg||"Changes saved successfully!")}).catch(r=>{this.isProcessing=!1})},resendIn:0,resendVerificationEmail(){if(this.resent)return;this.resendIn=60;let n=setInterval(()=>{this.resendIn--,this.resendIn<=0&&clearInterval(n)},1e3);f.post("/account/verification").then(()=>w.success("Email sent successfully!"))}}))}function ji(){v.data("quickAccess",()=>({processing:!1,showResults:!1,results:[],prompt:"",init(){this.bindKeyboardShortcuts()},bindKeyboardShortcuts(){window.addEventListener("keydown",l=>{l.metaKey&&l.key==="k"?(l.preventDefault(),this.$refs.input.focus()):l.key==="Escape"&&(this.$refs.input.blur(),this.showResults=!1)})},enter(l){l.key==="Enter"&&!l.shiftKey&&!this.processing&&this.prompt&&this.prompt.trim()!==""&&(l.preventDefault(),this.processing=!0,this.$refs.form.submit())}})),v.data("dashboard",()=>({documents:[],documentsFetched:!1,usageDataset:[],init(){this.checkPendingRedirection(),this.getRecentDocuments(),this.getUsageDataset()},getRecentDocuments(){let l={limit:5,sort:"created_at:desc"};f.get("/library/documents",l).then(n=>n.json()).then(n=>{this.documentsFetched=!0,this.documents=n.data})},checkPendingRedirection(){let l=Le.getRedirectPath();l&&(Le.clearRedirectPath(),window.location.href=l)},getUsageDataset(){f.get("/workspaces/"+this.$store.workspace.id+"/datasets/usage",{limit:30}).then(l=>l.json()).then(l=>{this.usageDataset=l})}}))}function Ni(){v.data("voiceover",(l=null,n=null)=>({isProcessing:!1,isDeleting:!1,history:[],historyLoaded:!1,preview:n,showSettings:!1,voice:l,prompt:null,query:"",voices:null,isLoading:!1,hasMore:!0,currentResource:null,showList:!1,init(){this.$watch("preview",r=>{if(this.history&&r){let s=this.history.findIndex(i=>i.id===r.id);s>=0&&(this.history[s]=r)}}),this.fetchHistory(),this.getVoices()},fetchHistory(){let r={limit:25};this.history&&this.history.length>0&&(r.starting_after=this.history[this.history.length-1].id),f.get("/library/speeches",r).then(s=>s.json()).then(s=>{let i=s.data;this.history.push(...i),i.length<r.limit&&(this.historyLoaded=!0)})},getVoices(r=null,s=!1){if(s&&(this.isLoading=!1,this.hasMore=!0),!this.hasMore||this.isLoading)return;this.isLoading=!0;let i={limit:25};r&&(i.starting_after=r),this.query&&(i.query=this.query),f.get("/voices",i).then(e=>e.json()).then(e=>{this.isLoading=!1,this.voices||(this.voices=[]),s?this.voices=e.data:this.voices.push(...e.data),this.hasMore=e.data.length>=i.limit})},submit(){if(this.isProcessing)return;this.isProcessing=!0;let r={voice_id:this.voice.id,prompt:this.prompt};f.post("/ai/speeches",r).then(s=>s.json()).then(s=>{this.history===null&&(this.history=[]),this.history.push(s),this.preview=s,this.isProcessing=!1,this.prompt=null,this.select(s)}).catch(s=>{this.isProcessing=!1,console.error(s)})},select(r){this.preview=r;let s=new URL(window.location.href);s.pathname="/app/voiceover/"+r.id,window.history.pushState({},"",s),r.voice&&(this.voice=r.voice)},save(r){f.post(`/library/speeches/${r.id}`,{title:r.title})},remove(r){this.isDeleting=!0,f.delete(`/library/speeches/${r.id}`).then(()=>{var i;this.preview=null,window.modal.close(),toast.show("Speech has been deleted successfully.","ti ti-trash"),this.isDeleting=!1;let s=new URL(window.location.href);s.pathname="/app/voiceover/"+(((i=this.voice)==null?void 0:i.id)||this.voices[0]||""),window.history.pushState({},"",s),this.history.splice(this.history.indexOf(r),1)}).catch(s=>this.isDeleting=!1)},selectVoice(r){this.voice=r,window.modal.close();let s=new URL(window.location.href);s.pathname="/app/voiceover/"+r.id,window.history.pushState({},"",s)}})),v.data("clone",()=>({file:null,isProcessing:!1,name:null,locale:null,gender:null,consent:!1,isRecording:!1,mediaRecorder:null,recordingTime:"00:00",recordingTimer:null,error:null,audioChunks:[],visualizerBars:Array.from({length:10},(l,n)=>({id:n,active:!1,height:20})),audioContext:null,analyser:null,dataArray:null,animationFrame:null,init(){this.audioContext=new(window.AudioContext||window.webkitAudioContext)},startRecording(){navigator.mediaDevices.getUserMedia({audio:!0}).then(l=>{this.error=null,this.isRecording=!0,this.mediaRecorder=new MediaRecorder(l,{mimeType:"audio/webm;codecs=opus",audioBitsPerSecond:128e3}),this.audioChunks=[],this.audioContext.state==="suspended"&&this.audioContext.resume();const n=this.audioContext.createMediaStreamSource(l);this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=32,n.connect(this.analyser),this.dataArray=new Uint8Array(this.analyser.frequencyBinCount),this.updateVisualizer(),this.mediaRecorder.ondataavailable=s=>{this.audioChunks.push(s.data)},this.mediaRecorder.onstop=async()=>{const s=new Blob(this.audioChunks,{type:"audio/webm"});try{const i=new(window.AudioContext||window.webkitAudioContext),e=await s.arrayBuffer(),t=await i.decodeAudioData(e),a=await this.audioBufferToWav(t);this.selectFile(new File([a],"voice_sample.wav",{type:"audio/wav"}))}catch(i){console.error("Error converting to WAV:",i),this.error="conversion_error"}this.isRecording=!1,clearInterval(this.recordingTimer),this.recordingTime="00:00"},this.mediaRecorder.start();let r=0;this.recordingTimer=setInterval(()=>{r++;const s=Math.floor(r/60),i=r%60;this.recordingTime=`${s.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`,r>=30&&this.stopRecording()},1e3)}).catch(l=>{console.error("Error accessing microphone:",l),this.error="microphone_error"})},updateVisualizer(){if(!this.isRecording)return;this.analyser.getByteFrequencyData(this.dataArray);const n=Array.from(this.dataArray).slice(0,10).reduce((s,i)=>s+i,0)/10/255,r=Math.floor(n*this.visualizerBars.length);this.visualizerBars.forEach((s,i)=>{s.active=i<r;let e=20,a=Math.sin(Date.now()/200+i*.8)*12;s.active?s.height=e+Math.abs(a):s.height=e}),this.animationFrame=requestAnimationFrame(()=>this.updateVisualizer())},stopRecording(){this.mediaRecorder&&this.mediaRecorder.state!=="inactive"&&(this.mediaRecorder.stop(),this.mediaRecorder.stream.getTracks().forEach(l=>l.stop()),this.animationFrame&&cancelAnimationFrame(this.animationFrame),this.visualizerBars=this.visualizerBars.map(l=>({...l,active:!1,height:20})),this.analyser&&(this.analyser.disconnect(),this.analyser=null))},selectFile(l){if(l.size>5242880){this.error="file_size";return}if(!l.type.startsWith("audio/")&&!l.type.startsWith("video/")){this.error="file_type";return}this.error=null,this.file=l},clone(){if(this.isProcessing)return;this.isProcessing=!0;let l=new FormData;l.append("name",this.name),l.append("consent",this.consent?1:0),l.append("file",this.file),l.append("locale",this.locale),l.append("gender",this.gender),f.post("/voices",l).then(n=>n.json()).then(n=>{this.file=null,this.name=null,this.consent=!1,this.isRecording=!1,this.audioContext.close(),this.resources.unshift(n),toast.success("Voice has been cloned successfully.")}).finally(()=>{this.isProcessing=!1,window.modal.close()})},audioBufferToWav(l){const n=l.numberOfChannels,r=l.sampleRate,s=l.length*n*2,i=new ArrayBuffer(44+s),e=new DataView(i),t=(h,u,d)=>{for(let c=0;c<d.length;c++)h.setUint8(u+c,d.charCodeAt(c))};t(e,0,"RIFF"),e.setUint32(4,36+s,!0),t(e,8,"WAVE"),t(e,12,"fmt "),e.setUint32(16,16,!0),e.setUint16(20,1,!0),e.setUint16(22,n,!0),e.setUint32(24,r,!0),e.setUint32(28,r*2,!0),e.setUint16(32,n*2,!0),e.setUint16(34,16,!0),t(e,36,"data"),e.setUint32(40,s,!0);const a=[];for(let h=0;h<n;h++)a[h]=l.getChannelData(h);let o=44;for(let h=0;h<l.length;h++)for(let u=0;u<n;u++){const d=Math.max(-1,Math.min(1,a[u][h]));e.setInt16(o,d<0?d*32768:d*32767,!0),o+=2}return new Blob([e],{type:"audio/wav"})}})),v.data("voice",l=>({voice:null,isProcessing:null,init(){this.voice={...l}},edit(){this.isProcessing=!0,f.post(`/voices/${this.voice.id}`,{name:this.voice.name,visibility:this.voice.visibility}).then(n=>n.json()).then(n=>{this.voice={...n},Object.assign(l,n),window.modal.close()}).finally(()=>{this.isProcessing=!1})}})),v.data("audience",l=>({item:l,isProcessing:null,changeAudience(n){this.isProcessing=n,f.post(`/library/${this.item.id}`,{visibility:n}).then(r=>r.json()).then(r=>{window.modal.close(),this.isProcessing=null,this.item=r})}}))}function Hi(){v.data("imagine",(l,n=[],r=[],s=null)=>({samples:r,adapters:[],adapter:null,query:"",showSettings:!1,history:[],historyLoaded:!1,isProcessing:!1,isDeleting:!1,preview:null,prompt:null,negativePrompt:null,images:[],params:{},original:{},placeholder:null,timer:0,form:!0,init(){n.forEach(i=>{i.models.forEach(e=>{let t=this.buildAdapter(i,e);this.adapters.push(t)})}),this.sortAdapters(),this.selectModel(this.findModel()),this.$watch("preview",i=>{if(this.history&&i){let e=this.history.findIndex(t=>t.id===i.id);e>=0&&(this.history[e]=i)}}),this.$watch("adapter",()=>this.reset()),s&&this.select(s),this.fetchHistory()},findModel(){let e=new URL(window.location.href).searchParams.get("model");if(e){let t=this.findAdapter(e);if(t)return t.model.key}return l},sortAdapters(){this.adapters.sort((i,e)=>{const t=i.model.granted||!1,a=e.model.granted||!1;if(t!==a)return a-t;const o=i.pinned||!1,h=e.pinned||!1;if(o!==h)return h-o;if(o&&h){const u=P.getPinOrder(i.model.key,"model"),d=P.getPinOrder(e.model.key,"model");return u-d}return 0})},findAdapter(i){for(let e=0;e<this.adapters.length;e++){const t=this.adapters[e];if(t.model.key==i)return t}return null},buildAdapter(i,e){var o,h,u;let t={...i};t.model=e,delete t.models;let a=[];return(h=(o=e.modalities)==null?void 0:o.input)!=null&&h.includes("image")&&a.push("image/jpeg","image/png","image/webp","image/gif"),(u=e.capabilities)!=null&&u.includes("tools")&&a.push(...types),t.file_types=a,t.pinned=P.isPinned(e.key,"model"),t},togglePin(i){P.toggle(i.model.key,"model"),i.pinned=!i.pinned,this.sortAdapters()},selectModel(i){const e=this.findAdapter(i);e&&(this.adapter=e,this.reset())},fetchHistory(){let i={limit:24};this.history&&this.history.length>0&&(i.starting_after=this.history[this.history.length-1].id),f.get("/library/images",i).then(e=>e.json()).then(e=>{let t=e.data;this.history.push(...t),t.length<i.limit&&(this.historyLoaded=!0)})},reset(){for(let i in this.params){if(this.original[i]===void 0){delete this.params[i];continue}this.params[i]=this.original[i]}this.images=[]},typeWrite(i,e){let t=0,a=10,o=()=>{t<e.length&&(this[i]+=e.charAt(t),t++,clearTimeout(this.timer),this.timer=setTimeout(o,a))};this[i]="",o()},surprise(){let i=this.samples[Math.floor(Math.random()*this.samples.length)];this.$refs.prompt.focus(),this.typeWrite("prompt",i)},placeholderSurprise(){clearTimeout(this.timer),!this.prompt&&(this.timer=setTimeout(()=>{let i=this.samples[Math.floor(Math.random()*this.samples.length)];this.typeWrite("placeholder",i)},2e3))},tab(i){this.prompt!=this.placeholder&&this.placeholder&&(i.preventDefault(),this.prompt=this.placeholder)},blur(){this.placeholder=null,clearTimeout(this.timer)},submit(i){if(this.isProcessing)return;this.isProcessing=!0,this.preview=null;let e={...this.params,prompt:this.prompt,negative_prompt:this.negativePrompt,model:this.adapter.model.key||null},t=new FormData;for(let a in e)t.append(a,e[a]);for(let a of this.images)t.append("images[]",a);f.post("/ai/images",t).then(a=>a.json()).then(a=>{this.history.unshift(a),this.select(a),this.prompt=null}).catch(a=>{let o=new URL(window.location.href);o.pathname="/app/imagine/",window.history.pushState({},"",o)}).finally(()=>{this.isProcessing=!1})},select(i){this.preview=i,this.form=!1;let e=new URL(window.location.href);e.pathname="/app/imagine/"+i.id,window.history.pushState({},"",e),this.checkProgress()},remove(i){this.isDeleting=!0,f.delete(`/library/images/${i.id}`).then(()=>{this.preview=null,this.form=!0,window.modal.close(),w.show("Image has been deleted successfully.","ti ti-trash"),this.isDeleting=!1;let e=new URL(window.location.href);e.pathname="/app/imagine/",window.history.pushState({},"",e),this.history.splice(this.history.indexOf(i),1)}).catch(e=>this.isDeleting=!1)},copyImgToClipboard(i){fetch(i.output_file.url).then(e=>e.blob()).then(e=>{let t=new ClipboardItem({[e.type]:e});return navigator.clipboard.write([t])}).then(()=>{w.success("Image copied to clipboard!")})},checkProgress(){this.preview.state>=3||f.get(`/library/images/${this.preview.id}`).then(i=>i.json()).then(i=>{this.preview=i,setTimeout(()=>this.checkProgress(),5e3)})},save(i){f.post(`/library/images/${i.id}`,{title:i.title}).then(e=>{this.updateHistory(e.data)})},addImage(i){const e=Array.from(i.target.files),t=this.adapter.model.config.images.limit||1;this.images=[...this.images,...e.slice(0,t-this.images.length)],i.target.value=null,window.modal.open("options")},removeImage(i){this.images=this.images.filter(e=>e!==i)},updateHistory(i){let e=this.history.findIndex(t=>t.id===i.id);e>=0&&(this.history[e]=i)},actionNew(){this.prompt=null,this.negativePrompt=null,this.params={},this.images=[],this.form=!0;let i=new URL(window.location.href);i.pathname="/app/imagine/",window.history.pushState({},"",i),this.$nextTick(()=>{this.$refs.prompt.focus()})},actionEdit(){var t,a;this.prompt=((t=this.preview.params)==null?void 0:t.prompt)||null,this.negativePrompt=((a=this.preview.params)==null?void 0:a.negative_prompt)||null;let i={...this.preview.params};delete i.prompt,delete i.negative_prompt,this.selectModel(this.preview.model),this.form=!0,this.$nextTick(()=>{this.params=i});let e=new URL(window.location.href);e.pathname="/app/imagine/",window.history.pushState({},"",e),this.$nextTick(()=>{this.$refs.prompt.focus()})},getNestedValue(i,e){if(!i||!e)return null;const a=e.replace(/\?\./g,".").split(".");let o=i;for(let h of a){if(o==null)return null;o=o[h]}return o},search(i,e){if(i=i.trim().toLowerCase(),!i)return!0;let t=[];t=["name","model.name","model.provider?.name","model.description"];for(let a of t){const o=this.getNestedValue(e,a);if(o&&typeof o=="string"&&o.toLowerCase().includes(i))return!0}return!1},chooseAdapter(i){this.selectModel(i.model.key),window.modal.close()}}))}function zi(){v.data("workspace",(l=null,n=null)=>({workspace:l,user:n,isSwithcing:null,isProcessing:!1,currentResource:null,voices:[],voiceCount:0,init(){},switchWorkspace(r){this.isSwithcing||(this.isSwithcing=r,f.post("/account/workspace",{id:r}).then(()=>{w.defer("Workspace switched!"),window.location.reload()}))},rename(r,s){this.isProcessing||(this.isProcessing=!0,f.patch(`/workspaces/${r}`,{name:s}).then(i=>i.json()).then(i=>{this.$store.workspace=i,this.isProcessing=!1,w.success("Workspace name updated!"),window.modal.close()}).catch(i=>this.isProcessing=!1))},saveKeys(r){this.isProcessing||(this.isProcessing=!0,f.patch(`/workspaces/${r}`,{openai_api_key:this.$store.workspace.openai_api_key,anthropic_api_key:this.$store.workspace.anthropic_api_key}).then(s=>{this.$store.workspace=s.data,this.isProcessing=!1,w.success("Changes saved successfully!")}))},create(r){this.isProcessing||(this.isProcessing=!0,f.post("/workspaces",{name:r}).then(()=>{w.defer("Workspace created!"),window.location="/app/workspace"}).catch(s=>this.isProcessing=!1))},removeMember(r,s){this.isProcessing=!0,f.delete(`/workspaces/${r}/users/${s}`).then(i=>{this.isProcessing=!1,i.json().then(e=>{this.$store.workspace=e,w.success("Member removed!")}).catch(e=>{w.show("Leaving workspace...","ti ti-progress"),setTimeout(()=>window.location.reload(),2e3)})}).catch(i=>this.isProcessing=!1)},inviteMember(r,s){this.isProcessing=!0,f.post(`/workspaces/${r}/invitations`,{email:s}).then(i=>i.json()).then(i=>{this.isProcessing=!1,this.$store.workspace=i,w.success("Invitation sent!"),window.modal.close()}).catch(i=>this.isProcessing=!1)},deleteInvitation(r,s){this.isProcessing=!0,f.delete(`/workspaces/${r}/invitations/${s}`).then(i=>i.json()).then(i=>{this.isProcessing=!1,this.$store.workspace=i,w.success("Invitation removed!")}).catch(i=>this.isProcessing=!1)},deleteWorkspace(r){this.isProcessing=!0,f.delete(`/workspaces/${r}`).then(()=>{w.defer("Workspace deleted!","ti ti-trash"),window.location.reload()}).catch(s=>this.isProcessing=!1)},transferOwnership(r,s){this.isProcessing=!0,f.patch(`/workspaces/${r}`,{owner_id:s}).then(i=>i.json()).then(i=>{this.isProcessing=!1,this.$store.workspace=i,w.success("Workspace ownership transferred!"),window.modal.close()}).catch(i=>this.isProcessing=!1)},fetchClonedVoices(){f.get("/voices/count?owner=workspace").then(r=>this.voiceCount=r.data.count),f.get("/voices?owner=workspace&limit=3").then(r=>this.voices=r.data.data)}}))}var Wi=Object.defineProperty,Ki=(l,n,r)=>n in l?Wi(l,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):l[n]=r,ie=(l,n,r)=>Ki(l,typeof n!="symbol"?n+"":n,r);class Tt extends Error{constructor(n,r){super(n),ie(this,"type"),ie(this,"field"),ie(this,"value"),ie(this,"line"),this.name="ParseError",this.type=r.type,this.field=r.field,this.value=r.value,this.line=r.line}}function Re(l){}function Yi(l){const{onEvent:n=Re,onError:r=Re,onRetry:s=Re,onComment:i}=l;let e="",t=!0,a,o="",h="";function u(p){const y=t?p.replace(/^\xEF\xBB\xBF/,""):p,[_,E]=Gi(`${e}${y}`);for(const C of _)d(C);e=E,t=!1}function d(p){if(p===""){g();return}if(p.startsWith(":")){i&&i(p.slice(p.startsWith(": ")?2:1));return}const y=p.indexOf(":");if(y!==-1){const _=p.slice(0,y),E=p[y+1]===" "?2:1,C=p.slice(y+E);c(_,C,p);return}c(p,"",p)}function c(p,y,_){switch(p){case"event":h=y;break;case"data":o=`${o}${y}
`;break;case"id":a=y.includes("\0")?void 0:y;break;case"retry":/^\d+$/.test(y)?s(parseInt(y,10)):r(new Tt(`Invalid \`retry\` value: "${y}"`,{type:"invalid-retry",value:y,line:_}));break;default:r(new Tt(`Unknown field "${p.length>20?`${p.slice(0,20)}…`:p}"`,{type:"unknown-field",field:p,value:y,line:_}));break}}function g(){o.length>0&&n({id:a,event:h||void 0,data:o.endsWith(`
`)?o.slice(0,-1):o}),a=void 0,o="",h=""}function m(p={}){e&&p.consume&&d(e),a=void 0,o="",h="",e=""}return{feed:u,reset:m}}function Gi(l){const n=[];let r="";const s=l.length;for(let i=0;i<s;i++){const e=l[i];e==="\r"&&l[i+1]===`
`?(n.push(r),r="",i++):e==="\r"||e===`
`?(n.push(r),r=""):r+=e}return[n,r]}class $e extends TransformStream{constructor({onError:n,onRetry:r,onComment:s}={}){let i;super({start(e){i=Yi({onEvent:t=>{e.enqueue(t)},onError(t){n==="terminate"?e.error(t):typeof n=="function"&&n(t)},onRetry:r,onComment:s})},transform(e){i.feed(e)}})}}function De(l,n,r){for(const s in n){if(!n.hasOwnProperty(s))continue;let i=s,e=n[s];if(typeof e>"u"&&(e=""),e===null&&(e=""),typeof r<"u"&&(i=r+"["+s+"]"),e.constructor===Array)i+="[]";else if(typeof e=="object"){De(l,e,i);continue}const t=l.elements.namedItem(i);if(!t)continue;const a=t.type||t[0].type;switch(a){default:t.value=e;break;case"radio":case"checkbox":{const h=e.constructor===Array?e:[e];for(let u=0;u<t.length;u++)t[u].checked=h.indexOf(t[u].value)>-1}break;case"select-multiple":{const h=e.constructor===Array?e:[e];for(let u=0;u<t.options.length;u++)t.options[u].selected=h.indexOf(t.options[u].value)>-1}break;case"select":case"select-one":t.value=e.toString()||e;break;case"date":t.value=new Date(e).toISOString().split("T")[0];break}const o=new Event("change",{bubbles:!0});switch(a){default:t.dispatchEvent(o);break;case"radio":case"checkbox":for(let h=0;h<t.length;h++)t[h].checked&&t[h].dispatchEvent(o);break}}}function Xi(){v.data("writer",(l=null,n=null)=>({required:[],isProcessing:!1,showForm:!0,isDeleting:!1,docs:[],index:0,preset:l,init(){n&&(this.showForm=!1,this.docs.push(n),De(this.$refs.form,n.params)),this.$watch("index",r=>{this.docs[r].id&&this.select(this.docs[r])})},async submit(r=null){if(this.isProcessing)return;this.docs.push({}),this.index=this.docs.length-1;let s=this.docs.length-1;this.isProcessing=!0,this.showForm=!1,r||(r={},new FormData(this.$refs.form).forEach((i,e)=>r[e]=i));try{const t=(await f.post(`/ai/completions/${this.preset?this.preset.id:""}`,r)).body.pipeThrough(new TextDecoderStream).pipeThrough(new $e).getReader();for(;;){const{value:a,done:o}=await t.read();if(o){this.isProcessing=!1;break}if(a.event=="token"){this.docs[s].content=(this.docs[s].content||"")+JSON.parse(a.data).data;continue}if(a.event=="document"){this.docs[s]=JSON.parse(a.data),this.select(this.docs[s]);continue}if(a.event=="error"){this.isProcessing=!1,this.showForm=!0,this.docs.splice(s,1),this.index=this.docs.length>1?this.docs.length-1:0,w.error(a.data);break}}}catch{this.isProcessing=!1,this.showForm=!0,this.docs.pop(),this.index=this.docs.length>1?this.docs.length-1:0}},format(r){return Mt(r)},copyDocumentContents(r){navigator.clipboard.writeText(r.content).then(()=>{w.success("Document copied to clipboard!")})},download(r,s){if(s=="markdown")var i="text/markdown",e="md",t=r.content;else if(s=="html")var i="text/html",e="html",t=`<html><head><meta charset="utf-8" /><title>${r.title}</title></head><body>${this.format(r.content)}</body></html>`;else if(s=="word")var i="application/vnd.ms-word",e="doc",t=`<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:w="urn:schemas-microsoft-com:office:word" xmlns="http://www.w3.org/TR/REC-html40"><head><meta charset="utf-8" /><title>${r.title}</title></head><body>${this.format(r.content)}</body></html>`;else var i="text/plain",e="txt",t=r.content;this.downloadFromUrl(`data:${i};charset=utf-8,${encodeURIComponent(t)}`,r.title,e)},downloadFromUrl(r,s,i){const e=document.createElement("a");e.href=r,e.download=`${s}.${i}`,document.body.appendChild(e),e.click(),document.body.removeChild(e)},saveDocument(r){f.post(`/library/documents/${r.id}`,r)},deleteDocument(r){this.isDeleting=!0,f.delete(`/library/documents/${r.id}`).then(()=>{w.success("Document deleted successfully!"),this.docs=this.docs.filter(s=>s.id!=r.id),this.index=this.docs.length>1?this.docs.length-1:0,this.docs.length==0&&(this.showForm=!0)}).finally(()=>{this.isDeleting=!1,window.modal.close()})},select(r){let s=new URL(window.location.href);s.pathname="/app/writer/"+(r.id??""),window.history.pushState({},"",s)}}))}function Ji(){v.data("coder",(l=null)=>({required:[],isProcessing:!1,showForm:!0,isDeleting:!1,docs:[],index:0,init(){l&&(this.showForm=!1,this.docs.push(l),De(this.$refs.form,l.params)),this.$watch("index",n=>{this.docs[n].id&&this.select(this.docs[n])})},async submit(n=null){if(this.isProcessing)return;this.docs.push({}),this.index=this.docs.length-1;let r=this.docs.length-1;this.isProcessing=!0,this.showForm=!1,n||(n={},new FormData(this.$refs.form).forEach((s,i)=>n[i]=s));try{const e=(await f.post("/ai/completions/code",n)).body.pipeThrough(new TextDecoderStream).pipeThrough(new $e).getReader();for(;;){const{value:t,done:a}=await e.read();if(a){this.isProcessing=!1;break}if(t.event=="token"){this.docs[r].content=(this.docs[r].content||"")+JSON.parse(t.data).data;continue}if(t.event=="document"){this.docs[r]=JSON.parse(t.data),this.select(this.docs[r]);continue}if(t.event=="error"){this.isProcessing=!1,this.showForm=!0,this.docs.splice(r,1),this.index=this.docs.length>1?this.docs.length-1:0,w.error(t.data);break}}}catch{this.isProcessing=!1,this.showForm=!0,this.docs.pop(),this.index=this.docs.length>1?this.docs.length-1:0}},format(n){return Mt(n)},copyDocumentContents(n){navigator.clipboard.writeText(n.content).then(()=>{w.success("Document copied to clipboard!")})},download(n,r){if(r=="markdown")var s="text/markdown",i="md",e=n.content;else if(r=="html")var s="text/html",i="html",e=`<html><head><meta charset="utf-8" /><title>${n.title}</title></head><body>${this.format(n.content)}</body></html>`;else if(r=="word")var s="application/vnd.ms-word",i="doc",e=`<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:w="urn:schemas-microsoft-com:office:word" xmlns="http://www.w3.org/TR/REC-html40"><head><meta charset="utf-8" /><title>${n.title}</title></head><body>${this.format(n.content)}</body></html>`;else var s="text/plain",i="txt",e=n.content;this.downloadFromUrl(`data:${s};charset=utf-8,${encodeURIComponent(e)}`,n.title,i)},downloadFromUrl(n,r,s){const i=document.createElement("a");i.href=n,i.download=`${r}.${s}`,document.body.appendChild(i),i.click(),document.body.removeChild(i)},saveDocument(n){f.post(`/library/code-documents/${n.id}`,n)},deleteDocument(n){this.isDeleting=!0,f.delete(`/library/code-documents/${n.id}`).then(()=>{w.success("Document deleted successfully!"),this.docs=this.docs.filter(r=>r.id!=n.id),this.index=this.docs.length>1?this.docs.length-1:0,this.docs.length==0&&(this.showForm=!0)}).finally(()=>{this.isDeleting=!1,window.modal.close()})},select(n){let r=new URL(window.location.href);r.pathname="/app/coder/"+(n.id??""),window.history.pushState({},"",r)}}))}function Qi(){v.data("transcriber",(l=null)=>({isProcessing:!1,isDeleting:!1,history:[],historyLoaded:!1,preview:l,previewTime:0,file:null,viewSegments:!0,error:null,init(){this.$watch("preview",n=>{if(this.history&&n){let r=this.history.findIndex(s=>s.id===n.id);r>=0&&(this.history[r]=n)}}),this.fetchHistory()},fetchHistory(){let n={limit:25};this.history&&this.history.length>0&&(n.starting_after=this.history[this.history.length-1].id),f.get("/library/transcriptions",n).then(r=>r.json()).then(r=>{let s=r.data;this.history.push(...s),s.length<n.limit&&(this.historyLoaded=!0)})},selectFile(n){let r=this.isFileValid(n);this.file=r?n:null},isFileValid(n){const r=["audio/flac","audio/mp3","audio/mpeg","audio/mpga","audio/m4a","audio/ogg","audio/wav","audio/webm","video/mp4","video/webm"];return n.size>25*1024*1024?(w.error(x("File size must be less than 25MB.")),!1):r.includes(n.type)?!0:(w.error("File must be in a supported audio/video format."),!1)},submit(n){this.isProcessing||(this.isProcessing=!0,f.post("/ai/transcriptions",new FormData(n)).then(r=>r.json()).then(r=>{this.history===null&&(this.history=[]),this.history.push(r),this.select(r),this.isProcessing=!1,n.reset(),this.file=null}).catch(r=>this.isProcessing=!1))},save(n){f.post(`/library/transcriptions/${n.id}`,{title:n.title})},select(n){this.preview=n;let r=new URL(window.location.href);r.pathname="/app/transcriber/"+n.id,window.history.pushState({},"",r)},remove(n){this.isDeleting=!0,f.delete(`/library/transcriptions/${n.id}`).then(()=>{this.preview=null,window.modal.close(),w.show("Transcription has been deleted successfully.","ti ti-trash"),this.isDeleting=!1;let r=new URL(window.location.href);r.pathname="/app/transcriber/",window.history.pushState({},"",r),this.history.splice(this.history.indexOf(n),1)}).catch(r=>this.isDeleting=!1)},getReadableDuration(n){let r=new Date(0);return r.setSeconds(n),n>3600?r.toISOString().substring(11,19):r.toISOString().substring(14,19)},download(n,r){if(r=="vtt")s="text/vtt",i="vtt",e=this.toVTT(n);else if(r=="srt")s="text/srt",i="srt",e=this.toSRT(n);else var s="text/plain",i="txt",e=n.content.text;this.downloadFromUrl(`data:${s};charset=utf-8,${encodeURIComponent(e)}`,n.title,i)},downloadFromUrl(n,r,s){const i=document.createElement("a");i.href=n,i.download=`${r}.${s}`,document.body.appendChild(i),i.click(),document.body.removeChild(i)},toVTT(n){let r=`WEBVTT

`;return n.content.segments.forEach((s,i)=>{let e=new Date(0);e.setSeconds(s.start),e=e.toISOString().substring(11,23);let t=new Date(0);t.setSeconds(s.end),t=t.toISOString().substring(11,23),r+=`${i+1}
`,r+=`${e} --> ${t}
`,r+=`${s.text.trim()}

`}),r},toSRT(n){let r="";return n.content.segments.forEach((s,i)=>{let e=new Date(0);e.setSeconds(s.start),e=e.toISOString().substring(11,23).replace(".",",");let t=new Date(0);t.setSeconds(s.end),t=t.toISOString().substring(11,23).replace(".",","),r+=`${i+1}
`,r+=`${e} --> ${t}
`,r+=`${s.text.trim()}

`}),r}}))}function Zi(){v.data("chat",(l,n=[],r=null,s=null,i=[])=>({adapters:[],adapter:null,conversation:null,assistant:r,history:[],historyLoaded:!1,assistants:null,tree:[],map:null,file:null,prompt:null,isProcessing:!1,parent:null,quote:null,contentElement:null,isDeleting:!1,query:"",options:null,recording:null,isRecording:!1,mediaRecorder:null,recordingTime:"00:00",recordingTimer:null,error:null,audioChunks:[],visualizerBars:Array.from({length:3},(e,t)=>({id:t,active:!1,height:20})),audioContext:null,analyser:null,dataArray:null,animationFrame:null,init(){this.audioContext=new(window.AudioContext||window.webkitAudioContext),n.forEach(a=>{a.models.forEach(o=>{let h=this.buildAdapter(a,o);this.adapters.push(h)})}),this.sortAdapters(),this.contentElement=document.getElementById("content"),this.selectModel(this.findModel()),s&&(this.select(s),setTimeout(()=>this.scrollToBottom(),500)),this.fetchHistory(),this.getAssistants(),window.addEventListener("mouseup",a=>{this.$refs.quote.classList.add("hidden"),this.$refs.quote.classList.remove("flex")});let t=new URL(window.location.href).searchParams.get("q");t&&(this.prompt=t,this.submit())},findModel(){var a;let t=new URL(window.location.href).searchParams.get("model");if(t){let o=this.findAdapter(t);if(o)return o.model.key}return((a=this.assistant)==null?void 0:a.model)||l},sortAdapters(){this.adapters.sort((e,t)=>{const a=e.model.granted||!1,o=t.model.granted||!1;if(a!==o)return o-a;const h=e.pinned||!1,u=t.pinned||!1;if(h!==u)return u-h;if(h&&u){const d=P.getPinOrder(e.model.key,"model"),c=P.getPinOrder(t.model.key,"model");return d-c}return 0})},findAdapter(e){for(let t=0;t<this.adapters.length;t++){const a=this.adapters[t];if(a.model.key==e)return a}return null},selectModel(e){const t=this.findAdapter(e);t&&(this.adapter=t)},buildAdapter(e,t){var h,u,d;let a={...e};a.model=t,delete a.models;let o=[];return(u=(h=t.modalities)==null?void 0:h.input)!=null&&u.includes("image")&&o.push("image/jpeg","image/png","image/webp","image/gif"),(d=t.capabilities)!=null&&d.includes("tools")&&o.push(...i),a.file_types=o,a.pinned=P.isPinned(t.key,"model"),a},togglePin(e,t="model"){t=="model"?(P.toggle(e.model.key,t),e.pinned=!e.pinned,this.sortAdapters()):t=="assistant"&&(P.toggle(e.id,t),e.pinned=!e.pinned,this.sortAssistants())},select(e){this.conversation=e,this.map=new Map,this.conversation.messages.forEach(h=>{this.map.set(h.id,h)}),this.generateTree();let t=new URL(window.location.href);if(t.pathname="/app/chat/"+e.id,t.search="",window.history.pushState({},"",t),this.tree.length===0)return;let a=this.tree[this.tree.length-1],o=a.children[a.index];this.selectAssistant(o.assistant),this.selectModel(o.model)},generateTree(e=null){if(e&&!this.map.has(e))return;this.tree.splice(0);let t=null;for(;;){let a={index:0,children:[]};this.map.forEach(h=>{t===h.parent_id&&a.children.push(h)});let o=a.children.map(h=>h.id);if(a.children.length>0){if(e){let h=this.map.get(e);for(;h;){if(o.indexOf(h.id)>=0){a.index=o.indexOf(h.id);break}if(h.parent_id){h=this.map.get(h.parent_id);continue}break}}this.tree.push(a),t=a.children[a.index].id;continue}break}},findMessage(e){if(this.map.has(e))return this.map.get(e);if(!this.history)return null;for(const t of this.history){let a=t.messages.find(o=>o.id===e);if(a)return a}return null},addMessage(e){let t=this.findConversation(e.conversation.id||e.conversation);if(!t)return;let a=this.isMessageVisible(e.id);if(e.conversation.id){for(const[o,h]of Object.entries(e.conversation));t.title=e.conversation.title,t.cost=e.conversation.cost}if(!t.messages.find(o=>o.id===e.id))t.messages.push(e),t.id==this.conversation.id&&(a=!0);else{let o=t.messages.findIndex(h=>h.id===e.id);e.reasoning=t.messages[o].reasoning,t.messages[o]=e}!this.conversation||t.id!=this.conversation.id||(this.map.set(e.id,e),a&&this.generateTree(e.id))},findConversation(e){return this.conversation&&this.conversation.id===e?this.conversation:this.history?this.history.find(t=>t.id===e):null},markAsSilent(){var e;this.history&&this.history.forEach(t=>{t.messages.forEach(a=>{a.isProcessing&&(a.silent=!0)})}),(e=this.conversation)!=null&&e.messages&&this.conversation.messages.forEach(t=>{t.isProcessing&&(t.silent=!0)})},isMessageVisible(e){return this.tree.some(t=>{var a;return((a=t.children[t.index])==null?void 0:a.id)===e})},fetchHistory(){let e={limit:25};this.history&&this.history.length>0&&(e.starting_after=this.history[this.history.length-1].id),f.get("/library/conversations",e).then(t=>t.json()).then(t=>{let a=t.data;this.history.push(...a),a.length<e.limit&&(this.historyLoaded=!0)})},getAssistants(e=null){let t={limit:250,all:!0};e&&(t.starting_after=e),f.get("/assistants",t).then(a=>a.json()).then(a=>{this.assistants||(this.assistants=[]);let o=a.data;o.forEach(h=>{var u,d;h.granted=!(((u=this.$store.workspace.subscription)==null?void 0:u.plan.config.assistants)!=null&&!((d=this.$store.workspace.subscription)!=null&&d.plan.config.assistants.includes(h.id))),h.pinned=P.isPinned(h.id,"assistant")}),this.assistants.push(...o),this.sortAssistants(),a.data.length>0&&a.data.length==t.limit&&this.getAssistants(this.assistants[this.assistants.length-1].id)})},sortAssistants(){this.assistants.sort((e,t)=>{const a=e.granted||!1,o=t.granted||!1;if(a!==o)return o-a;const h=e.pinned||!1,u=t.pinned||!1;if(h!==u)return u-h;if(h&&u){const d=P.getPinOrder(e.id,"assistant"),c=P.getPinOrder(t.id,"assistant");return d-c}return 0})},stopProcessing(){this.isProcessing=!1},async submit(){var a;if(this.isProcessing)return;if(this.isProcessing=!0,!this.conversation)try{await this.createConversation()}catch{this.stopProcessing();return}let e=new FormData;e.append("content",this.prompt),e.append("model",this.adapter.model.key),this.recording&&e.append("recording",this.recording),(a=this.assistant)!=null&&a.id&&e.append("assistant_id",this.assistant.id),this.quote&&e.append("quote",this.quote);let t=document.getElementsByClassName("message");if(t.length>0){let o=t[t.length-1].dataset.id;o&&e.append("parent_id",o)}this.file&&e.append("file",this.file),this.ask(e)},async ask(e){try{const o=(await f.post("/ai/conversations/"+this.conversation.id+"/messages",e)).body.pipeThrough(new TextDecoderStream).pipeThrough(new $e).getReader();this.file=null,this.recording=null;let h;for(;;){this.isProcessing&&(this.quote=null,this.prompt=null,this.isProcessing=!1,this.markAsSilent());const{value:u,done:d}=await o.read();if(d){this.stopProcessing(),h&&(h.call=null,h.isProcessing=!1,this.isMessageVisible(h.id)&&this.generateTree(h.id));break}if(u.event=="token"||u.event=="reasoning-token"){let c=JSON.parse(u.data);if(h=this.findMessage(c.attributes.message_id),h){const g=Date.now();u.event=="reasoning-token"?(h.silent?h.pendingReasoning=(h.pendingReasoning||"")+c.data:h.reasoning+=(h.pendingReasoning||"")+c.data,h.call={name:"reasoning"}):(h.silent?h.pendingContent=(h.pendingContent||"")+c.data:h.content+=(h.pendingContent||"")+c.data,h.call=null),h.isProcessing=!0}await this.$nextTick();continue}if(h&&u.event=="call"){let c=JSON.parse(u.data);h=this.findMessage(c.attributes.message_id),h&&(h.call=c.data,this.isMessageVisible(h.id)&&this.generateTree(h.id));continue}if(u.event=="message"){h=JSON.parse(u.data),h.hasOwnProperty("reasoning")||(h.reasoning=""),h.content||(h.isProcessing=!0),this.addMessage(h),this.scrollToBottom();continue}if(u.event=="error"){this.error(u.data);break}}}catch(t){this.error(t)}},scrollToBottom(){this.contentElement&&this.$nextTick(()=>{this.contentElement.scrollTo({top:this.contentElement.scrollHeight,behavior:"smooth"})})},error(e){this.stopProcessing(),toast.error(e),console.error(e),this.generateTree()},async createConversation(){let t=(await f.post("/ai/conversations")).data;this.history===null&&(this.history=[]),this.history.unshift(t),this.select(t)},save(e){f.post(`/library/conversations/${e.id}`,{title:e.title}).then(t=>{if(this.history){let a=this.history.findIndex(o=>o.id===t.data.id);a>=0&&(this.history[a]=t.data)}})},enter(e){e.key==="Enter"&&!e.shiftKey&&!this.isProcessing&&this.prompt&&this.prompt.trim()!==""&&(e.preventDefault(),this.submit())},paste(e){if(!this.adapter||this.adapter.file_types.length===0)return;const t=e.clipboardData.items;for(let a=0;a<t.length;a++)if(t[a].kind==="file"){const o=t[a].getAsFile();if(o&&this.adapter.file_types.includes(o.type)){this.file=o,e.preventDefault();break}}},copy(e){navigator.clipboard.writeText(e.content).then(()=>{toast.success("Copied to clipboard!")})},textSelect(e){this.$refs.quote.classList.add("hidden"),this.$refs.quote.classList.remove("flex");let t=window.getSelection();if(t.rangeCount<=0)return;let a=t.getRangeAt(0);if(a.toString().trim()=="")return;e.stopPropagation();let h=a.startContainer,u=a.startOffset,d;if(h.nodeType===Node.TEXT_NODE){let y=document.createRange();y.setStart(h,u),y.setEnd(h,u+1),d=y.getBoundingClientRect()}else h.nodeType===Node.ELEMENT_NODE&&(d=h.getBoundingClientRect());let c=this.$refs.quote.parentElement,g=c.getBoundingClientRect(),m=d.left-g.left+c.scrollLeft,p=d.top-g.top+c.scrollTop;this.$refs.quote.style.top=p+"px",this.$refs.quote.style.left=m+"px",this.$refs.quote.classList.add("flex"),this.$refs.quote.classList.remove("hidden"),this.$refs.quote.dataset.value=a.toString()},selectQuote(){this.quote=this.$refs.quote.dataset.value,this.$refs.quote.dataset.value=null,this.$refs.quote.classList.add("hidden"),this.$refs.quote.classList.remove("flex"),window.getSelection().removeAllRanges()},regenerate(e,t=null,a=null){if(!e.parent_id)return;let o=this.conversation.messages.find(u=>u.id===e.parent_id);if(!o)return;let h=new FormData;h.append("parent_id",o.id),h.append("model",t||e.model),a&&h.append("assistant_id",a.id),this.isProcessing=!0,this.ask(h)},edit(e,t){var o;let a=new FormData;a.append("model",e.model),a.append("content",t),e.parent_id&&a.append("parent_id",e.parent_id),(o=e.assistant)!=null&&o.id&&a.append("assistant_id",e.assistant.id),e.quote&&a.append("quote",e.quote),this.isProcessing=!0,this.ask(a)},remove(e){this.isDeleting=!0,f.delete(`/library/conversations/${e.id}`).then(()=>{this.conversation=!1,window.modal.close(),toast.show("Conversation has been deleted successfully.","ti ti-trash"),this.isDeleting=!1;let t=new URL(window.location.href);t.pathname="/app/chat/",window.history.pushState({},"",t),this.history.splice(this.history.indexOf(e),1),setTimeout(()=>this.conversation=null,100)}).catch(t=>this.isDeleting=!1)},getNestedValue(e,t){if(!e||!t)return null;const o=t.replace(/\?\./g,".").split(".");let h=e;for(let u of o){if(h==null)return null;h=h[u]}return h},search(e,t,a){if(e=e.trim().toLowerCase(),!e)return!0;let o=[];a=="assistant"?o=["name","expertise","description"]:a=="adapter"&&(o=["name","model.name","model.provider?.name","model.description"]);for(let h of o){const u=this.getNestedValue(t,h);if(u&&typeof u=="string"&&u.toLowerCase().includes(e))return!0}return!1},selectAssistant(e){if(this.assistant=e,window.modal.close(),!this.conversation){let t=new URL(window.location.href);t.pathname="/app/chat/"+((e==null?void 0:e.id)||""),window.history.pushState({},"",t)}},toolKey(e){switch(e.object){case"image":return"imagine";default:return null}},chooseAdapter(e){var t;this.options?(this.options.adapter=e,((t=this.assistants)==null?void 0:t.length)>0?window.modal.open("options"):this.applyOptions()):(this.selectModel(e.model.key),window.modal.close())},chooseAssistant(e){this.options?(this.options.assistant=e,this.options.model=(e==null?void 0:e.model)||this.options.model,window.modal.open("options")):(this.selectAssistant(e),window.modal.close())},showOptions(e){var a;let t="options";if(e){let o=this.findAdapter(e.model);this.options={assistant:e.assistant,message:e,adapter:o}}else this.options=null,t="assistant-list-modal";window.modal.open(((a=this.assistants)==null?void 0:a.length)>0?t:"models")},applyOptions(){this.regenerate(this.options.message,this.options.adapter.model.key,this.options.assistant),this.options=null,window.modal.close()},startRecording(){navigator.mediaDevices.getUserMedia({audio:!0}).then(e=>{this.isRecording=!0,this.mediaRecorder=new MediaRecorder(e,{mimeType:"audio/webm;codecs=opus",audioBitsPerSecond:128e3}),this.audioChunks=[],this.audioContext.state==="suspended"&&this.audioContext.resume();const t=this.audioContext.createMediaStreamSource(e);this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=32,t.connect(this.analyser),this.dataArray=new Uint8Array(this.analyser.frequencyBinCount),this.updateVisualizer(),this.mediaRecorder.ondataavailable=o=>{this.audioChunks.push(o.data)},this.mediaRecorder.onstop=async()=>{const o=new Blob(this.audioChunks,{type:"audio/webm"});try{const h=new(window.AudioContext||window.webkitAudioContext),u=await o.arrayBuffer(),d=await h.decodeAudioData(u),c=await this.audioBufferToWav(d);this.recording=new File([c],"voice_sample.wav",{type:"audio/wav"})}catch(h){this.error(h)}this.isRecording=!1,clearInterval(this.recordingTimer),this.recordingTime="00:00"},this.mediaRecorder.start();let a=0;this.recordingTimer=setInterval(()=>{a++;const o=Math.floor(a/60),h=a%60;this.recordingTime=`${o.toString().padStart(2,"0")}:${h.toString().padStart(2,"0")}`,a>=600&&this.stopRecording()},1e3)}).catch(e=>{this.error(e)})},updateVisualizer(){if(!this.isRecording)return;this.analyser.getByteFrequencyData(this.dataArray);const t=Array.from(this.dataArray).slice(0,10).reduce((o,h)=>o+h,0)/10/255,a=Math.floor(t*this.visualizerBars.length);this.visualizerBars.forEach((o,h)=>{o.active=h<a;let u=20,c=Math.sin(Date.now()/200+h*.8)*12;o.active?o.height=u+Math.abs(c):o.height=u}),this.animationFrame=requestAnimationFrame(()=>this.updateVisualizer())},stopRecording(){this.mediaRecorder&&this.mediaRecorder.state!=="inactive"&&(this.mediaRecorder.stop(),this.mediaRecorder.stream.getTracks().forEach(e=>e.stop()),this.animationFrame&&cancelAnimationFrame(this.animationFrame),this.visualizerBars=this.visualizerBars.map(e=>({...e,active:!1,height:20})),this.analyser&&(this.analyser.disconnect(),this.analyser=null))},audioBufferToWav(e){const t=e.numberOfChannels,a=e.sampleRate,o=e.length*t*2,h=new ArrayBuffer(44+o),u=new DataView(h),d=(m,p,y)=>{for(let _=0;_<y.length;_++)m.setUint8(p+_,y.charCodeAt(_))};d(u,0,"RIFF"),u.setUint32(4,36+o,!0),d(u,8,"WAVE"),d(u,12,"fmt "),u.setUint32(16,16,!0),u.setUint16(20,1,!0),u.setUint16(22,t,!0),u.setUint32(24,a,!0),u.setUint32(28,a*2,!0),u.setUint16(32,t*2,!0),u.setUint16(34,16,!0),d(u,36,"data"),u.setUint32(40,o,!0);const c=[];for(let m=0;m<t;m++)c[m]=e.getChannelData(m);let g=44;for(let m=0;m<e.length;m++)for(let p=0;p<t;p++){const y=Math.max(-1,Math.min(1,c[p][m]));u.setInt16(g,y<0?y*32768:y*32767,!0),g+=2}return new Blob([u],{type:"audio/wav"})}}))}function er(){v.data("voiceIsolator",(l=null)=>({isProcessing:!1,isDeleting:!1,history:[],historyLoaded:!1,preview:l,previewTime:0,file:null,viewInputFile:!1,init(){this.$watch("preview",n=>{if(this.history&&n){let r=this.history.findIndex(s=>s.id===n.id);r>=0&&(this.history[r]=n)}}),this.fetchHistory()},fetchHistory(){let n={limit:25};this.history&&this.history.length>0&&(n.starting_after=this.history[this.history.length-1].id),f.get("/library/isolated-voices",n).then(r=>r.json()).then(r=>{let s=r.data;this.history.push(...s),s.length<n.limit&&(this.historyLoaded=!0)})},submit(n){this.isProcessing||(this.isProcessing=!0,f.post("/ai/isolated-voices",new FormData(n)).then(r=>r.json()).then(r=>{this.history===null&&(this.history=[]),this.history.push(r),this.select(r),this.isProcessing=!1,n.reset(),this.file=null}).catch(r=>this.isProcessing=!1))},save(n){f.post(`/library/isolated-voices/${n.id}`,{title:n.title})},select(n){this.preview=n;let r=new URL(window.location.href);r.pathname="/app/voice-isolator/"+n.id,window.history.pushState({},"",r)},remove(n){this.isDeleting=!0,f.delete(`/library/isolated-voices/${n.id}`).then(()=>{this.preview=null,window.modal.close(),w.show("Resource has been deleted successfully.","ti ti-trash"),this.isDeleting=!1;let r=new URL(window.location.href);r.pathname="/app/voice-isolator/",window.history.pushState({},"",r),this.history.splice(this.history.indexOf(n),1)}).catch(r=>this.isDeleting=!1)}}))}function tr(){v.data("classifier",(l=null)=>({isProcessing:!1,isDeleting:!1,history:[],historyLoaded:!1,preview:l,prompt:null,currentResource:null,init(){this.$watch("preview",n=>{if(this.history&&n){let r=this.history.findIndex(s=>s.id===n.id);r>=0&&(this.history[r]=n)}}),this.fetchHistory()},fetchHistory(){let n={limit:25};this.history&&this.history.length>0&&(n.starting_after=this.history[this.history.length-1].id),f.get("/library/classifications",n).then(r=>r.json()).then(r=>{let s=r.data;this.history.push(...s),s.length<n.limit&&(this.historyLoaded=!0)})},submit(){if(this.isProcessing)return;this.isProcessing=!0;let n={input:this.prompt};f.post("/ai/classifications",n).then(r=>r.json()).then(r=>{this.history===null&&(this.history=[]),this.history.push(r),this.preview=r,this.isProcessing=!1,this.prompt=null,this.select(r)}).catch(r=>{this.isProcessing=!1,console.error(r)})},select(n){this.preview=n;let r=new URL(window.location.href);r.pathname="/app/classifier/"+n.id,window.history.pushState({},"",r)},save(n){f.post(`/library/classifications/${n.id}`,{title:n.title})},remove(n){this.isDeleting=!0,f.delete(`/library/classifications/${n.id}`).then(()=>{this.preview=null,window.modal.close(),toast.show("Classification has been deleted successfully.","ti ti-trash"),this.isDeleting=!1;let r=new URL(window.location.href);r.pathname="/app/classifier/",window.history.pushState({},"",r),this.history.splice(this.history.indexOf(n),1)}).catch(r=>this.isDeleting=!1)}}))}function ir(){v.data("affiliates",()=>({payouts:[],payoutsFetched:!1,affiliate:{},affiliateIsProcessing:!1,withdrawIsProcessing:!1,init(){this.affiliate=this.$store.user.affiliate,this.getPayouts()},setPayoutMethod(){this.affiliateIsProcessing=!0,f.put("/account/affiliate",this.affiliate).then(l=>l.json()).then(l=>{this.affiliateIsProcessing=!1,this.$store.user=l,window.modal.close(),w.success("Changes saved successfully!")})},sendWithdrawalRequest(){this.withdrawIsProcessing=!0,f.post("/account/affiliate/payouts").then(l=>l.json()).then(l=>{w.defer("Withdrawal request sent successfully!"),window.location.reload()})},getPayouts(){let l={limit:5,sort:"created_at:desc"};f.get("/account/affiliate/payouts",l).then(n=>n.json()).then(n=>{this.payoutsFetched=!0,this.payouts=n.data})}}))}function rr(){v.data("composer",(l,n=[],r=null)=>({adapters:[],adapter:null,showSettings:!1,history:[],historyLoaded:!1,isProcessing:!1,isDeleting:!1,preview:null,prompt:null,tags:null,instrumental:!1,model:null,init(){this.$watch("adapter",()=>{var s;return this.model=(s=this.adapter)==null?void 0:s.model}),this.$watch("preview",s=>{if(this.history&&s){let i=this.history.findIndex(e=>e.id===s.id);i>=0&&(this.history[i]=s)}}),n.forEach(s=>{s.is_available&&s.models.forEach(i=>{i.is_available&&this.adapters.push(i)})}),this.adapter=this.adapters.find(s=>s.model==l),!this.adapter&&this.adapters.length>0&&(this.adapter=this.adapters[0]),r&&this.select(r),this.$watch("model",()=>this.adapter=this.adapters.find(s=>s.model==this.model)),this.fetchHistory()},fetchHistory(){let s={limit:25};this.history&&this.history.length>0&&(s.starting_after=this.history[this.history.length-1].id),f.get("/library/compositions",s).then(i=>i.json()).then(i=>{let e=i.data;this.history.push(...e),e.length<s.limit&&(this.historyLoaded=!0)})},submit(s){if(this.isProcessing)return;this.isProcessing=!0;let i={prompt:this.prompt,tags:this.tags,instrumental:this.instrumental,model:this.adapter.model||null};f.post("/ai/compositions",i).then(e=>e.json()).then(e=>{e.forEach(t=>{this.history.push(t)}),this.select(e[0]),this.prompt=null,this.isProcessing=!1}).catch(e=>{this.isProcessing=!1,this.preview=null;let t=new URL(window.location.href);t.pathname="/app/composer/",window.history.pushState({},"",t),this.history.splice(this.history.indexOf(r),1)})},select(s){this.preview=s;let i=new URL(window.location.href);i.pathname="/app/composer/"+s.id,window.history.pushState({},"",i)},remove(s){this.isDeleting=!0,f.delete(`/library/compositions/${s.id}`).then(()=>{this.preview=null,window.modal.close(),w.show("Composition has been deleted successfully.","ti ti-trash"),this.isDeleting=!1;let i=new URL(window.location.href);i.pathname="/app/composer/",window.history.pushState({},"",i),this.history.splice(this.history.indexOf(s),1)}).catch(i=>this.isDeleting=!1)}}))}function sr(){v.data("video",(l,n=[],r=null)=>({adapters:[],adapter:null,query:"",history:[],historyLoaded:!1,isProcessing:!1,isDeleting:!1,preview:null,prompt:null,negativePrompt:null,frames:[],params:{},original:{},timer:0,form:!0,init(){n.forEach(s=>{s.models.forEach(i=>{let e=this.buildAdapter(s,i);this.adapters.push(e)})}),this.sortAdapters(),this.selectModel(this.findModel()),this.$watch("preview",s=>{if(this.history&&s){let i=this.history.findIndex(e=>e.id===s.id);i>=0&&(this.history[i]=s)}}),this.$watch("adapter",()=>this.reset()),r&&this.select(r),this.fetchHistory()},findModel(){let i=new URL(window.location.href).searchParams.get("model");if(i){let e=this.findAdapter(i);if(e)return e.model.key}return l},sortAdapters(){this.adapters.sort((s,i)=>{const e=s.model.granted||!1,t=i.model.granted||!1;if(e!==t)return t-e;const a=s.pinned||!1,o=i.pinned||!1;if(a!==o)return o-a;if(a&&o){const h=P.getPinOrder(s.model.key,"model"),u=P.getPinOrder(i.model.key,"model");return h-u}return 0})},findAdapter(s){for(let i=0;i<this.adapters.length;i++){const e=this.adapters[i];if(e.model.key==s)return e}return null},buildAdapter(s,i){var a,o,h;let e={...s};e.model=i,delete e.models;let t=[];return(o=(a=i.modalities)==null?void 0:a.input)!=null&&o.includes("image")&&t.push("image/jpeg","image/png","image/webp","image/gif"),(h=i.capabilities)!=null&&h.includes("tools")&&t.push(...types),e.file_types=t,e.pinned=P.isPinned(i.key,"model"),e},togglePin(s){P.toggle(s.model.key,"model"),s.pinned=!s.pinned,this.sortAdapters()},selectModel(s){const i=this.findAdapter(s);i&&(this.adapter=i,this.reset())},fetchHistory(){let s={limit:25};this.history&&this.history.length>0&&(s.starting_after=this.history[this.history.length-1].id),f.get("/library/videos",s).then(i=>i.json()).then(i=>{let e=i.data;this.history.push(...e),e.length<s.limit&&(this.historyLoaded=!0)})},reset(){for(let s in this.params){if(this.original[s]===void 0){delete this.params[s];continue}this.params[s]=this.original[s]}this.frames=[]},submit(s){if(this.isProcessing)return;this.isProcessing=!0,this.$nextTick(()=>this.preview=null);let i={...this.params,prompt:this.prompt,negative_prompt:this.negativePrompt,model:this.adapter.model.key||null},e=new FormData;for(let t in i)e.append(t,i[t]);for(let t of this.frames)e.append("frames[]",t);f.post("/ai/videos",e).then(t=>t.json()).then(t=>{this.history.unshift(t),this.select(t),setTimeout(()=>{this.prompt=null,this.isProcessing=!1},1e3)}).catch(t=>{this.isProcessing=!1,this.preview=null;let a=new URL(window.location.href);a.pathname="/app/video/",window.history.pushState({},"",a)})},select(s){this.preview=s,this.form=!1;let i=new URL(window.location.href);i.pathname="/app/video/"+s.id,window.history.pushState({},"",i),this.checkProgress()},remove(s){this.isDeleting=!0,f.delete(`/library/videos/${s.id}`).then(()=>{this.preview=null,this.form=!0,window.modal.close(),w.show("Video has been deleted successfully.","ti ti-trash"),this.isDeleting=!1;let i=new URL(window.location.href);i.pathname="/app/video/",window.history.pushState({},"",i),this.history.splice(this.history.indexOf(s),1)}).catch(i=>this.isDeleting=!1)},checkProgress(){this.preview.state>=3||f.get(`/library/videos/${this.preview.id}`).then(s=>s.json()).then(s=>{this.preview=s,setTimeout(()=>this.checkProgress(),5e3)})},save(s){f.post(`/library/videos/${s.id}`,{title:s.title}).then(i=>{if(this.history){let e=this.history.findIndex(t=>t.id===i.data.id);e>=0&&(this.history[e]=i.data)}})},addFrame(s){const i=Array.from(s.target.files),e=this.adapter.model.config.frames.limit||1;this.frames=[...this.frames,...i.slice(0,e-this.frames.length)],s.target.value=null,window.modal.open("options")},removeFrame(s){this.frames=this.frames.filter(i=>i!==s)},actionNew(){this.prompt=null,this.negativePrompt=null,this.params={},this.frames=[],this.form=!0;let s=new URL(window.location.href);s.pathname="/app/video/",window.history.pushState({},"",s),this.$nextTick(()=>{this.$refs.prompt.focus()})},actionEdit(){var t,a;this.prompt=((t=this.preview.params)==null?void 0:t.prompt)||null,this.negativePrompt=((a=this.preview.params)==null?void 0:a.negative_prompt)||null,this.frames=[];let s=(this.preview.params.frames||[]).map((o,h)=>new Promise(u=>{this.fileFromUrl(o,o,d=>{u({file:d,index:h})})}));Promise.all(s).then(o=>{this.frames=o.sort((h,u)=>h.index-u.index).map(h=>h.file)});let i={...this.preview.params};delete i.prompt,delete i.negative_prompt,delete i.frames,this.selectModel(this.preview.model),this.form=!0,this.$nextTick(()=>{this.params=i});let e=new URL(window.location.href);e.pathname="/app/video/",window.history.pushState({},"",e),this.$nextTick(()=>{this.$refs.prompt.focus()})},fileFromUrl(s,i,e){fetch(s).then(t=>t.blob()).then(t=>new File([t],i,{type:t.type})).then(e)},getNestedValue(s,i){if(!s||!i)return null;const t=i.replace(/\?\./g,".").split(".");let a=s;for(let o of t){if(a==null)return null;a=a[o]}return a},search(s,i){if(s=s.trim().toLowerCase(),!s)return!0;let e=[];e=["name","model.name","model.provider?.name","model.description"];for(let t of e){const a=this.getNestedValue(i,t);if(a&&typeof a=="string"&&a.toLowerCase().includes(s))return!0}return!1},chooseAdapter(s){this.selectModel(s.model.key),window.modal.close()}}))}function nr(){v.data("models",(l=[])=>({adapters:[],adapter:null,query:"",init(){l.forEach(s=>{s.models.forEach(i=>{let e=this.buildAdapter(s,i);this.adapters.push(e)})}),this.sortAdapters();let r=new URL(window.location.href).searchParams.get("model");if(r){let s=this.findAdapter(r);s&&this.chooseAdapter(s)}},chooseAdapter(n){this.adapter=n,window.modal.open("model")},findAdapter(n){for(let r=0;r<this.adapters.length;r++){const s=this.adapters[r];if(s.model.key==n)return s}return null},sortAdapters(){this.adapters.sort((n,r)=>{const s=n.model.granted||!1,i=r.model.granted||!1;if(s!==i)return i-s;const e=n.pinned||!1,t=r.pinned||!1;if(e!==t)return t-e;if(e&&t){const a=P.getPinOrder(n.model.key,"model"),o=P.getPinOrder(r.model.key,"model");return a-o}return 0})},buildAdapter(n,r){let s={...n};return s.model=r,delete s.models,s.pinned=P.isPinned(r.key,"model"),s.useLink=this.getUseLink(s),s},togglePin(n){P.toggle(n.model.key,"model"),n.pinned=!n.pinned,this.sortAdapters()},getNestedValue(n,r){if(!n||!r)return null;const i=r.replace(/\?\./g,".").split(".");let e=n;for(let t of i){if(e==null)return null;e=e[t]}return e},search(n,r){if(n=n.trim().toLowerCase(),!n)return!0;let s=["name","model.name","model.provider?.name","model.description"];for(let i of s){const e=this.getNestedValue(r,i);if(e&&typeof e=="string"&&e.toLowerCase().includes(n))return!0}return!1},getUseLink(n){return n.model.type=="llm"?`app/chat?model=${n.model.key}`:n.model.type=="image"?`app/imagine?model=${n.model.key}`:n.model.type=="transcription"?`app/transcriber?model=${n.model.key}`:n.model.type=="video"?`app/video?model=${n.model.key}`:n.model.type=="voice-isolation"?`app/voice-isolator?model=${n.model.key}`:null}}))}Kt();ji();Gt();Xi();Ji();Hi();Qi();Xt();Ui();Ni();zi();qi();Zi();er();tr();ir();rr();sr();nr();v.plugin(Wt);v.plugin(Nt.defaultProps({arrow:!1}));v.start();
